<!DOCTYPE html>
<html lang="ja">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1V1ELMWFTY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-1V1ELMWFTY');
    </script>
    <meta name="ad-mode" content="kids">
    <script src="/js/ads.js" defer></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>ã—ã‚ƒã—ã‚“ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ« / Photo Slide Puzzle - 3ã€œ5æ­³å‘ã‘ç„¡æ–™çŸ¥è‚²ã‚²ãƒ¼ãƒ </title>
    <meta name="description" content="[JP] ãŠæ°—ã«å…¥ã‚Šã®å†™çœŸãŒãƒ‘ã‚ºãƒ«ã«ï¼3ã€œ5æ­³å‘ã‘ç„¡æ–™çŸ¥è‚²ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ«ã€‚è«–ç†çš„æ€è€ƒã‚„é›†ä¸­åŠ›ã‚’è‚²ã¿ã¾ã™ã€‚[EN] Turn your favorite photos into puzzles! A free educational slide puzzle for kids aged 3-5. Develops logical thinking and focus.">
    <meta name="keywords" content="çŸ¥è‚²ã‚²ãƒ¼ãƒ ,ç„¡æ–™,å­ä¾›å‘ã‘,ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ«,å†™çœŸãƒ‘ã‚ºãƒ«,Educational Games,Kids Puzzle,Photo Puzzle">
    <meta name="author" content="KuniFami Soft Studio">
    <meta name="robots" content="index, follow">

    <meta property="og:title" content="ã—ã‚ƒã—ã‚“ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ« - é›†ä¸­ãƒã‚¹ã‚¿ãƒ¼ Kids">
    <meta property="og:description" content="å†™çœŸã‚’ãˆã‚‰ã‚“ã§ãƒ‘ã‚ºãƒ«ã«ã—ã‚ˆã†ï¼ã‚¯ãƒªã‚¢ã®ã‚³ãƒ„ã‚‚ã®ã£ã¦ã‚‹ã‚ˆã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kunifami-soft-studio.com/kids/photo_puzzle.html">
    <meta name="twitter:card" content="summary">

    <style>
        :root { --bg: #FFF9C4; --text: #5D4037; }
        * { -webkit-tap-highlight-color: transparent; user-select: none; box-sizing: border-box; }
        body {
            margin: 0; padding: 0; background: var(--bg);
            font-family: "Hiragino Sans", "Meiryo", sans-serif;
            display: flex; flex-direction: column; align-items: center; min-height: 100vh;
            color: var(--text);
        }
        #startScreen {
            position: fixed; inset: 0; z-index: 5000;
            background: linear-gradient(135deg, #FFEB3B 0%, #FBC02D 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            overflow-y: auto; padding-bottom: 40px;
        }
        .start-card {
            background: white; padding: 20px; border-radius: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); width: 94%; max-width: 440px; 
            text-align: center; margin-top: 15px;
        }
        
        .tips-area {
            background: #FFFDE7; border-radius: 20px; padding: 15px; margin: 15px 0;
            text-align: left; border: 2px solid #FFF176;
        }
        .tips-title { font-weight: 900; color: #E65100; font-size: 0.9rem; margin-bottom: 5px; }
        .tips-text { font-size: 0.75rem; line-height: 1.4; color: #795548; font-weight: bold; }
        .tips-text b { color: #D84315; }

        .upload-area { border: 4px dashed #FBC02D; border-radius: 20px; padding: 20px; margin-bottom: 15px; background: #FFFDE7; cursor: pointer; display: block; }
        .setting-box { background: #f5f5f5; border-radius: 12px; padding: 8px 12px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .switch { position: relative; display: inline-block; width: 40px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; inset: 0; background-color: #ccc; transition: .4s; border-radius: 24px; }
        .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #4CAF50; }
        input:checked + .slider:before { transform: translateX(18px); }

        .difficulty-btn { width: 100%; padding: 14px; margin: 6px 0; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: 800; cursor: pointer; color: white; box-shadow: 0 4px 0 rgba(0,0,0,0.1); }
        .easy { background: #4CAF50; }
        .normal { background: #2196F3; }
        .hard { background: #FF5722; }

        #gameScreen { display: none; width: 100%; max-width: 500px; padding: 10px; flex-direction: column; align-items: center; min-height: 100vh; }
        .puzzle-board { display: grid; gap: 2px; background: #8D6E63; padding: 6px; border-radius: 12px; width: 340px; height: 340px; box-shadow: 0 12px 24px rgba(0,0,0,0.2); margin: 10px 0; }
        .tile { width: 100%; height: 100%; background-color: #fff; border-radius: 4px; cursor: pointer; position: relative; background-repeat: no-repeat; border: 1px solid rgba(255,255,255,0.3); }
        .tile.empty { background: #BCAAA4 !important; border: none; cursor: default; }
        .tile-num { position: absolute; top: 2px; left: 4px; font-size: 0.9rem; font-weight: 900; color: white; text-shadow: 1px 1px 2px #000; opacity: 0.8; pointer-events: none; }
        .hidden { display: none; }

        .ui-btn { background: #fff; border: 3px solid #FF9800; padding: 10px 20px; border-radius: 20px; color: #E65100; font-weight: 800; margin: 5px; font-size: 0.9rem; }
        
        /* ä¿¡é ¼æ€§å‘ä¸Šç”¨ãƒªãƒ³ã‚¯ã‚¹ã‚¿ã‚¤ãƒ« */
        .footer-links { margin-top: 15px; }
        .footer-links a { color: #AD1457; text-decoration: none; font-size: 0.7rem; margin: 0 10px; font-weight: bold; }
        .footer-links a:hover { text-decoration: underline; }
        .copyright { font-size: 0.6rem; color: #999; padding: 10px; text-align: center; }
    </style>
</head>
<body>
<div id="startScreen">
    <div class="start-card">
        <div style="font-size: 2.5rem;">ğŸ“¸ğŸ§©</div>
        <h1 style="margin: 0; color: #E65100; font-size: 1.4rem;">ã—ã‚ƒã—ã‚“ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ«</h1>
        <h2 style="margin: 0; color: #FBC02D; font-size: 0.9rem; font-weight: normal; margin-bottom: 10px;">Photo Slide Puzzle</h2>
        
        

        <div class="tips-area">
            <div class="tips-title">ğŸ’¡ Tips / ã‚¯ãƒªã‚¢ã®ã‚³ãƒ„</div>
            <div class="tips-text">
                <b>1. ä¸Šã®æ®µã‹ã‚‰æƒãˆã‚‹ / Top Row First</b><br>
                ã¾ãšã¯ä¸€ç•ªä¸Šã®æ®µã‚’å·¦ã‹ã‚‰é †ã«å®Œæˆã•ã›ã‚ˆã†ã€‚ä¸€åº¦æƒãˆãŸã‚‰ãã“ã¯ã‚‚ã†å‹•ã‹ã•ãªã„ã®ãŒã‚³ãƒ„ï¼<br>
                <b>2. è§’ã®å…¥ã‚Œæ–¹ / Corner Trick</b><br>
                å³ç«¯ã®ã‚¿ã‚¤ãƒ«ãŒå…¥ã‚‰ãªã„æ™‚ã¯ã€å³ã‹ã‚‰2ç•ªç›®ã¨ã‚»ãƒƒãƒˆã§å›ã™ã‚ˆã†ã«å‹•ã‹ã™ã¨ã†ã¾ãã„ãã‚ˆã€‚<br>
                <b>3. æœ€å¾Œã¯ä¸€æ°—ã« / Final Steps</b><br>
                ä¸‹ã®2æ®µã¾ã§æ¥ãŸã‚‰ã€ãã‚‹ãã‚‹å›ã™ã‚ˆã†ã«å‹•ã‹ã—ã¦ä½ç½®ã‚’èª¿æ•´ã—ã‚ˆã†ã€‚
            </div>
        </div>
        
        <label class="upload-area" for="fileInput">
            <div style="font-weight: bold; color: #FBC02D; font-size: 0.9rem;">ã—ã‚ƒã—ã‚“ã‚’ ãˆã‚‰ã‚“ã§ã­ / Choose Photo</div>
            <input type="file" id="fileInput" accept="image/*" style="display: none;">
        </label>
        
        <div id="levelSelection" style="display: none;">
            <div class="setting-box">
                <span style="font-size: 0.8rem; font-weight: bold;">ã™ã†ã˜ã‚’è¡¨ç¤º / Show Numbers</span>
                <label class="switch"><input type="checkbox" id="numberSwitch" checked><span class="slider"></span></label>
            </div>
            <button class="difficulty-btn easy" onclick="startGame(2)">ã‹ã‚“ãŸã‚“ / Easy (2Ã—2)</button>
            <button class="difficulty-btn normal" onclick="startGame(3)">ãµã¤ã† / Normal (3Ã—3)</button>
            <button class="difficulty-btn hard" onclick="startGame(4)">ã‚€ãšã‹ã—ã„ / Hard (4Ã—4)</button>
        </div>
        <a href="./menu.html" style="display:inline-block; margin-top:15px; color:#999; text-decoration:none; font-size:0.75rem; font-weight: bold;">â† ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸ã‚‚ã©ã‚‹ / Back to Menu</a>
        
        <div class="footer-links">
            <a href="privacy.html">Privacy Policy / è¦ç´„</a>
            <a href="contact.html">Contact / ãŠå•ã„åˆã‚ã›</a>
        </div>
    </div>
    <div class="copyright">Â© 2026 KuniFami Soft Studio. All Rights Reserved.</div>
</div>

<div id="gameScreen">
    <div id="successText" style="display: none; color: #E65100; font-weight: 900; font-size: 1.5rem; text-align: center; margin-bottom: 10px;">âœ¨ Clear! ã§ããŸã­ï¼ âœ¨</div>
    <div class="puzzle-board" id="board"></div>
    <div style="display: flex; gap: 5px;">
        <button class="ui-btn" onclick="shufflePuzzle()">Shuffle / ã¾ãœã‚‹</button>
        <button class="ui-btn" onclick="stopGame()">Menu / ã‚„ã‚ã‚‹</button>
    </div>
    <div class="copyright">Â© 2026 KuniFami Soft Studio</div>
</div>

<script>
    const fileInput = document.getElementById('fileInput');
    const levelSelection = document.getElementById('levelSelection');
    const numberSwitch = document.getElementById('numberSwitch');
    const board = document.getElementById('board');
    let baseImage = "";
    let gridSize = 3;
    let currentTiles = [];
    const boardSize = 340;

    fileInput.onchange = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (event) => {
            baseImage = event.target.result;
            levelSelection.style.display = 'block';
        };
        reader.readAsDataURL(file);
    };

    function startGame(size) {
        gridSize = size;
        document.getElementById('startScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'flex';
        board.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
        resetTiles();
        shufflePuzzle();
    }

    function stopGame() {
        document.getElementById('startScreen').style.display = 'flex';
        document.getElementById('gameScreen').style.display = 'none';
    }

    function resetTiles() {
        const total = gridSize * gridSize;
        currentTiles = [];
        for (let i = 1; i < total; i++) currentTiles.push(i);
        currentTiles.push(0);
    }

    function renderBoard() {
        board.innerHTML = '';
        const showNumbers = numberSwitch.checked;

        currentTiles.forEach((tileNum, index) => {
            const div = document.createElement('div');
            if (tileNum === 0) {
                div.className = 'tile empty';
            } else {
                div.className = 'tile';
                const correctPos = tileNum - 1;
                const r = Math.floor(correctPos / gridSize), c = correctPos % gridSize;
                div.style.backgroundImage = `url(${baseImage})`;
                div.style.backgroundSize = `${boardSize}px ${boardSize}px`;
                div.style.backgroundPosition = `-${c * (boardSize/gridSize)}px -${r * (boardSize/gridSize)}px`;
                
                const numSpan = document.createElement('span');
                numSpan.className = 'tile-num' + (showNumbers ? '' : ' hidden');
                numSpan.innerText = tileNum;
                div.appendChild(numSpan);
                
                div.onclick = () => moveTile(index);
            }
            board.appendChild(div);
        });
        checkWin();
    }

    function moveTile(index) {
        const emptyIndex = currentTiles.indexOf(0);
        const r = Math.floor(index / gridSize), c = index % gridSize;
        const er = Math.floor(emptyIndex / gridSize), ec = emptyIndex % gridSize;
        if (Math.abs(r - er) + Math.abs(c - ec) === 1) {
            [currentTiles[index], currentTiles[emptyIndex]] = [currentTiles[emptyIndex], currentTiles[index]];
            renderBoard();
        }
    }

    function shufflePuzzle() {
        document.getElementById('successText').style.display = 'none';
        resetTiles();
        for (let i = 0; i < gridSize * gridSize * 50; i++) {
            const emptyIndex = currentTiles.indexOf(0);
            const r = Math.floor(emptyIndex / gridSize), c = emptyIndex % gridSize;
            let n = [];
            if (r > 0) n.push(emptyIndex - gridSize);
            if (r < gridSize - 1) n.push(emptyIndex + gridSize);
            if (c > 0) n.push(emptyIndex - 1);
            if (c < gridSize - 1) n.push(emptyIndex + 1);
            const move = n[Math.floor(Math.random() * n.length)];
            [currentTiles[emptyIndex], currentTiles[move]] = [currentTiles[move], currentTiles[emptyIndex]];
        }
        renderBoard();
    }

    function checkWin() {
        const win = currentTiles.every((t, i) => t === (i === currentTiles.length - 1 ? 0 : i + 1));
        if (win && document.getElementById('successText').style.display === 'none') {
            document.getElementById('successText').style.display = 'block';
        }
    }
</script>
</body>
</html>
