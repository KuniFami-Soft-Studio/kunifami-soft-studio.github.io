<!DOCTYPE html>
<html lang="ja">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1V1ELMWFTY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-1V1ELMWFTY');
    </script>
    <meta name="ad-mode" content="kids">
    <script src="/js/ads.js" defer></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>ã—ã‚ƒã—ã‚“ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ« / Photo Slide Puzzle - 3ã€œ5æ­³å‘ã‘ç„¡æ–™çŸ¥è‚²ã‚²ãƒ¼ãƒ </title>
    <meta name="description" content="[JP] ãŠæ°—ã«å…¥ã‚Šã®å†™çœŸãŒãƒ‘ã‚ºãƒ«ã«ï¼3ã€œ5æ­³å‘ã‘ç„¡æ–™çŸ¥è‚²ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ«ã€‚è«–ç†çš„æ€è€ƒã‚„é›†ä¸­åŠ›ã‚’è‚²ã¿ã¾ã™ã€‚[EN] Turn your favorite photos into puzzles! A free educational slide puzzle for kids aged 3-5. Develops logical thinking and focus.">
    <meta name="keywords" content="çŸ¥è‚²ã‚²ãƒ¼ãƒ ,ç„¡æ–™,å­ä¾›å‘ã‘,ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ«,å†™çœŸãƒ‘ã‚ºãƒ«,Educational Games,Kids Puzzle,Photo Puzzle">
    <meta name="author" content="kunifami" >
    <meta name="robots" content="index, follow">

    <meta property="og:title" content="ã—ã‚ƒã—ã‚“ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ« - é›†ä¸­ãƒã‚¹ã‚¿ãƒ¼ Kids">
    <meta property="og:description" content="å†™çœŸã‚’ãˆã‚‰ã‚“ã§ãƒ‘ã‚ºãƒ«ã«ã—ã‚ˆã†ï¼ã‚¯ãƒªã‚¢ã®ã‚³ãƒ„ã‚‚ã®ã£ã¦ã‚‹ã‚ˆã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kunifami-soft-studio.com/kids/photo_puzzle.html">
    <meta name="twitter:card" content="summary">

    <style>
        :root { --bg: #FFF9C4; --text: #5D4037; }
        * { -webkit-tap-highlight-color: transparent; user-select: none; box-sizing: border-box; }
        body {
            margin: 0; padding: 0; background: var(--bg);
            font-family: "Hiragino Sans", "Meiryo", sans-serif;
            display: flex; flex-direction: column; align-items: center; min-height: 100vh;
            color: var(--text);
        }
        #startScreen {
            position: fixed; inset: 0; z-index: 5000;
            background: linear-gradient(135deg, #FFEB3B 0%, #FBC02D 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            overflow-y: auto; padding-bottom: 40px;
        }
        .start-card {
            background: white; padding: 20px; border-radius: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); width: 94%; max-width: 440px; 
            text-align: center; margin-top: 15px;
        }
        
        .tips-area {
            background: #FFFDE7; border-radius: 20px; padding: 15px; margin: 15px 0;
            text-align: left; border: 2px solid #FFF176;
        }
        .tips-title { font-weight: 900; color: #E65100; font-size: 0.9rem; margin-bottom: 5px; }
        .tips-text { font-size: 0.75rem; line-height: 1.4; color: #795548; font-weight: bold; }
        .tips-text b { color: #D84315; }

        .upload-area { border: 4px dashed #FBC02D; border-radius: 20px; padding: 20px; margin-bottom: 15px; background: #FFFDE7; cursor: pointer; display: block; }
        .setting-box { background: #f5f5f5; border-radius: 12px; padding: 8px 12px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .switch { position: relative; display: inline-block; width: 40px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; inset: 0; background-color: #ccc; transition: .4s; border-radius: 24px; }
        .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #4CAF50; }
        input:checked + .slider:before { transform: translateX(18px); }

        .difficulty-btn { width: 100%; padding: 14px; margin: 6px 0; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: 800; cursor: pointer; color: white; box-shadow: 0 4px 0 rgba(0,0,0,0.1); }
        .easy { background: #4CAF50; }
        .normal { background: #2196F3; }
        .hard { background: #FF5722; }

        /* --- ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒ»ã‚¬ã‚¤ãƒ‰è¨­å®š --- */
        .usage-guide {
            margin-top: 15px; font-size: 0.8rem; color: #666; text-align: left;
            background: #fff3e0; padding: 12px; border-radius: 15px; width: 100%;
        }
        .usage-guide p { margin: 0 0 8px 0; font-weight: bold; border-bottom: 1px solid #ffcc80; padding-bottom: 3px; }
        .usage-guide ul { margin: 0; padding-left: 1.2rem; line-height: 1.5; }
        .usage-guide li { margin-bottom: 5px; }
        .lang-en { display: block; font-size: 0.75rem; color: #888; margin-top: 2px; }

        .guide-container { margin-top: 20px; text-align: left; border-top: 1px solid #eee; padding-top: 15px; width: 100%; }
        details { margin-bottom: 10px; background: #f9f9f9; border-radius: 10px; overflow: hidden; }
        summary {
            padding: 12px; font-weight: bold; cursor: pointer; color: #555;
            list-style: none; display: flex; justify-content: space-between; align-items: center;
            font-size: 0.85rem;
        }
        summary::after { content: 'â–¼'; font-size: 0.7rem; color: #aaa; }
        details[open] summary::after { content: 'â–²'; }
        .guide-content { padding: 15px; font-size: 0.85rem; color: #444; line-height: 1.6; border-top: 1px solid #eee; }
        .guide-content p { margin: 0 0 10px 0; }
        .hr-dashed { border: 0; border-top: 1px dashed #ddd; margin: 10px 0; }

        #gameScreen { display: none; width: 100%; max-width: 500px; padding: 10px; flex-direction: column; align-items: center; min-height: 100vh; }
        .puzzle-board { display: grid; gap: 2px; background: #8D6E63; padding: 6px; border-radius: 12px; width: 340px; height: 340px; box-shadow: 0 12px 24px rgba(0,0,0,0.2); margin: 10px 0; }
        .tile { width: 100%; height: 100%; background-color: #fff; border-radius: 4px; cursor: pointer; position: relative; background-repeat: no-repeat; border: 1px solid rgba(255,255,255,0.3); }
        .tile.empty { background: #BCAAA4 !important; border: none; cursor: default; }
        .tile-num { position: absolute; top: 2px; left: 4px; font-size: 0.9rem; font-weight: 900; color: white; text-shadow: 1px 1px 2px #000; opacity: 0.8; pointer-events: none; }
        .hidden { display: none; }

        .ui-btn { background: #fff; border: 3px solid #FF9800; padding: 10px 20px; border-radius: 20px; color: #E65100; font-weight: 800; margin: 5px; font-size: 0.9rem; }
        
        .footer-links { margin-top: 15px; }
        .footer-links a { color: #AD1457; text-decoration: none; font-size: 0.7rem; margin: 0 10px; font-weight: bold; }
        .footer-links a:hover { text-decoration: underline; }
        .copyright { font-size: 0.7rem; color: #999; padding: 10px; text-align: center; }
    </style>
</head>
<body>
<div id="startScreen">
    <div class="start-card">
        <div style="font-size: 2.5rem;">ğŸ“¸ğŸ§©</div>
        <h1 style="margin: 0; color: #E65100; font-size: 1.4rem;">ã—ã‚ƒã—ã‚“ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ«</h1>
        <h2 style="margin: 0; color: #FBC02D; font-size: 0.9rem; font-weight: normal; margin-bottom: 10px;">Photo Slide Puzzle</h2>
        
        <div class="tips-area">
            <div class="tips-title">ğŸ’¡ Tips / ã‚¯ãƒªã‚¢ã®ã‚³ãƒ„</div>
            <div class="tips-text">
                <b>1. ä¸Šã®æ®µã‹ã‚‰æƒãˆã‚‹ / Top Row First</b><br>
                ã¾ãšã¯ä¸€ç•ªä¸Šã®æ®µã‚’å·¦ã‹ã‚‰é †ã«å®Œæˆã•ã›ã‚ˆã†ã€‚ä¸€åº¦æƒãˆãŸã‚‰ãã“ã¯ã‚‚ã†å‹•ã‹ã•ãªã„ã®ãŒã‚³ãƒ„ï¼<br>
                <b>2. è§’ã®å…¥ã‚Œæ–¹ / Corner Trick</b><br>
                å³ç«¯ã®ã‚¿ã‚¤ãƒ«ãŒå…¥ã‚‰ãªã„æ™‚ã¯ã€å³ã‹ã‚‰2ç•ªç›®ã¨ã‚»ãƒƒãƒˆã§å›ã™ã‚ˆã†ã«å‹•ã‹ã™ã¨ã†ã¾ãã„ãã‚ˆã€‚<br>
                <b>3. æœ€å¾Œã¯ä¸€æ°—ã« / Final Steps</b><br>
                ä¸‹ã®2æ®µã¾ã§æ¥ãŸã‚‰ã€ãã‚‹ãã‚‹å›ã™ã‚ˆã†ã«å‹•ã‹ã—ã¦ä½ç½®ã‚’èª¿æ•´ã—ã‚ˆã†ã€‚
            </div>
        </div>
        
        <label class="upload-area" for="fileInput">
            <div style="font-weight: bold; color: #FBC02D; font-size: 0.9rem;">ã—ã‚ƒã—ã‚“ã‚’ ãˆã‚‰ã‚“ã§ã­ / Choose Photo</div>
            <input type="file" id="fileInput" accept="image/*" style="display: none;">
        </label>
        
        <div id="levelSelection" style="display: none;">
            <div class="setting-box">
                <span style="font-size: 0.8rem; font-weight: bold;">ã™ã†ã˜ã‚’è¡¨ç¤º / Show Numbers</span>
                <label class="switch"><input type="checkbox" id="numberSwitch" checked><span class="slider"></span></label>
            </div>
            <button class="difficulty-btn easy" onclick="startGame(2)">ã‹ã‚“ãŸã‚“ / Easy (2Ã—2)</button>
            <button class="difficulty-btn normal" onclick="startGame(3)">ãµã¤ã† / Normal (3Ã—3)</button>
            <button class="difficulty-btn hard" onclick="startGame(4)">ã‚€ãšã‹ã—ã„ / Hard (4Ã—4)</button>
        </div>

        <div class="usage-guide">
            <p>ã€ã”åˆ©ç”¨ã‚¬ã‚¤ãƒ‰ / Usage Guideã€‘</p>
            <ul>
                <li><strong>ãŠå­æ§˜ã«ï¼š</strong>èº«è¿‘ãªå†™çœŸãŒãƒãƒ©ãƒãƒ©ã«ãªã‚‹é©šãã¨ã€ãã‚Œã‚’å…ƒã«æˆ»ã™é”æˆæ„Ÿã‚’é€šã˜ã¦ã€è«–ç†çš„æ€è€ƒã®åŸºç¤ã‚’è‚²ã¿ã¾ã™ã€‚<span class="lang-en">(Nurtures the foundation of logical thinking through the process of restoring familiar photos.)</span></li>
                <li><strong>ã‚·ãƒ‹ã‚¢ã®æ–¹ã«ï¼š</strong>å…ˆã‚’èª­ã‚€æˆ¦ç•¥æ€§ã¨ã€æ‰‹æŒ‡ã‚’å‹•ã‹ã™å·§ç·»æ€§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã«ã‚ˆã‚Šã€è„³ã®æ´»æ€§åŒ–ã¨ç¶­æŒã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚<span class="lang-en">(Supports brain activation through strategic planning and manual dexterity exercises.)</span></li>
                <li><strong>æ•™è‚²é–¢ä¿‚è€…ã®çš†æ§˜ã¸ï¼š</strong>ã€Œæ‰‹é †ã‚’çµ„ã¿ç«‹ã¦ã‚‹åŠ›ã€ã‚’é¤Šã†ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã®ICTæ•™æã¨ã—ã¦ã”æ´»ç”¨ã„ãŸã ã‘ã¾ã™ã€‚<span class="lang-en">(A browser-based ICT tool ideal for developing procedural planning skills.)</span></li>
            </ul>
        </div>

        <div class="guide-container">
            <details>
                <summary>ã€ä¿è­·è€…å‘ã‘ï¼šçŸ¥è‚²ã®ç›®çš„ã€‘ / For Parents</summary>
                <div class="guide-content">
                    <p><strong>Educational Goal ï¼ˆçŸ¥è‚²ã®ç›®çš„ï¼‰</strong></p>
                    <p>ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ«ã¯ã€å¹¼å…æœŸã®èªçŸ¥ç™ºé”ã«ãŠã„ã¦æ¥µã‚ã¦é‡è¦ãªã€Œç©ºé–“æŠŠæ¡èƒ½åŠ›ã€ã¨ã€Œè«–ç†çš„æ¨è«–åŠ›ã€ã‚’é¤Šã†ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚
                    
                    å˜ãªã‚‹ã‚¸ã‚°ã‚½ãƒ¼ãƒ‘ã‚ºãƒ«ã¨ã¯ç•°ãªã‚Šã€ä¸€ã¤ã®ãƒ”ãƒ¼ã‚¹ã‚’å‹•ã‹ã™ãŸã‚ã«å‘¨å›²ã®é…ç½®ã‚’æ•´ç†ã—ç›´ã™å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ã€Œç›®çš„ã®ãŸã‚ã«æ‰‹é †ã‚’çµ„ã¿ç«‹ã¦ã‚‹ï¼ˆãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ï¼‰ã€ã¨ã„ã†å®Ÿè¡Œæ©Ÿèƒ½ï¼ˆã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ãƒ»ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ã‚’å¼·åŠ›ã«åˆºæ¿€ã—ã¾ã™ã€‚
                    ãŠæ°—ã«å…¥ã‚Šã®å†™çœŸï¼ˆå®¶æ—ã‚„ãƒšãƒƒãƒˆãªã©ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€æƒ…ç·’çš„é–¢å¿ƒã‚’é«˜ã‚ã€æœ€å¾Œã¾ã§ã‚„ã‚Šé‚ã’ã‚‹ã€ŒæŒç¶šçš„æ³¨æ„åŠ›ã€ã¨å®Œæˆæ™‚ã®ã€Œè‡ªå·±è‚¯å®šæ„Ÿã€ã‚’é†¸æˆã—ã¾ã™ã€‚æ•°å­—è¡¨ç¤ºæ©Ÿèƒ½ã«ã‚ˆã‚Šã€æ•°è©ã®é †åºæ€§ã®ç¿’å¾—ã‚‚åŒæ™‚ã«ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</p>
                    <hr class="hr-dashed">
                    <p>This slide puzzle is designed to nurture "Spatial Recognition" and "Logical Reasoning," both crucial for early childhood cognitive development. Unlike standard jigsaw puzzles, moving a single piece requires reorganizing the surrounding tiles, which strongly stimulates "Executive Function" (planning skills). Using familiar photos increases emotional engagement, fostering "Sustained Attention" and "Self-Esteem" upon completion. The number display feature also assists in learning numerical sequences.</p>
                </div>
            </details>
            <details>
                <summary>ã€ã‚·ãƒ‹ã‚¢å‘ã‘ï¼šã‚¢ãƒ—ãƒªã®ç›®çš„ã€‘ / For Seniors</summary>
                <div class="guide-content">
                    <p><strong>App Goal ï¼ˆã‚¢ãƒ—ãƒªã®ç›®çš„ï¼‰</strong></p>
                    <p>æœ¬ã‚¢ãƒ—ãƒªã¯ã€ã‚·ãƒ‹ã‚¢ä¸–ä»£ã®èªçŸ¥æ©Ÿèƒ½ç¶­æŒã‚’ç›®çš„ã¨ã—ãŸãƒ‡ã‚¸ã‚¿ãƒ«è„³ãƒˆãƒ¬ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚
                    
                    ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‘ã‚ºãƒ«ã‚’è§£ãéç¨‹ã§ã¯ã€ç›¤é¢å…¨ä½“ã®çŠ¶æ³ã‚’æŠŠæ¡ã™ã‚‹ã€Œè¦–è¦šçš„ã‚¹ã‚­ãƒ£ãƒ‹ãƒ³ã‚°èƒ½åŠ›ã€ã¨ã€ç©ºããƒã‚¹ã‚’åˆ©ç”¨ã—ã¦ç›®çš„ã®ãƒ”ãƒ¼ã‚¹ã‚’é‹ã¶ãŸã‚ã®ã€ŒçŸ­æœŸè¨˜æ†¶ï¼ˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªï¼‰ã€ã‚’ãƒ•ãƒ«ã«æ´»ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã¯è„³ã®å¸ä»¤å¡”ã§ã‚ã‚‹ã€Œå‰é ­å‰é‡ã€ã‚’åˆºæ¿€ã—ã€æƒ…å ±ã®å‡¦ç†èƒ½åŠ›ã‚’ç¶­æŒã™ã‚‹åŠ©ã‘ã¨ãªã‚Šã¾ã™ã€‚
                    ã¾ãŸã€æŒ‡å…ˆã‚’ä½¿ã£ã¦ç”»é¢ä¸Šã®ã‚¿ã‚¤ãƒ«ã‚’æ­£ç¢ºã«æ»‘ã‚‰ã›ã‚‹å‹•ä½œã¯ã€Œå·§ç·»æ€§ï¼ˆã“ã†ã¡ã›ã„ï¼‰ã€ã®ç¶­æŒã«ç¹‹ãŒã‚Šã€è„³ã¸ã®è¡€æµã‚’ä¿ƒé€²ã—ã¾ã™ã€‚ã”è‡ªèº«ã®æ€ã„å‡ºã®å†™çœŸã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€å½“æ™‚ã®è¨˜æ†¶ã‚’å‘¼ã³èµ·ã“ã™ã€Œå›æƒ³æ³•ã€ã®è¦ç´ ã‚‚åŠ ã‚ã‚Šã€æ¥½ã—ã¿ãªãŒã‚‰ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã§ãã‚‹è¨­è¨ˆã¨ãªã£ã¦ã„ã¾ã™ã€‚</p>
                    <hr class="hr-dashed">
                    <p>This app serves as a digital brain training tool aimed at maintaining cognitive function for seniors. Solving the puzzle requires visual scanning to grasp the entire board and working memory to move pieces via the empty slot. This stimulates the prefrontal cortex and helps preserve information processing skills. Fine motor finger movements maintain manual dexterity and promote cerebral blood flow. Incorporating personal photos adds an element of "Reminiscence Therapy," making the exercise both enjoyable and refreshing.</p>
                </div>
            </details>
        </div>

        <a href="./menu.html" style="display:inline-block; margin-top:15px; color:#999; text-decoration:none; font-size:0.75rem; font-weight: bold;">â† ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸ã‚‚ã©ã‚‹ / Back to Menu</a>
        
        <div class="footer-links">
            <a href="privacy.html">Privacy Policy / è¦ç´„</a>
            <a href="contact.html">Contact / ãŠå•ã„åˆã‚ã›</a>
        </div>
    </div>
    <div class="copyright">Â© 2026 KuniFami Soft Studio. All Rights Reserved.</div>
</div>

<div id="gameScreen">
    <div id="successText" style="display: none; color: #E65100; font-weight: 900; font-size: 1.5rem; text-align: center; margin-bottom: 10px;">âœ¨ Clear! ã§ããŸã­ï¼ âœ¨</div>
    <div class="puzzle-board" id="board"></div>
    <div style="display: flex; gap: 5px;">
        <button class="ui-btn" onclick="shufflePuzzle()">Shuffle / ã¾ãœã‚‹</button>
        <button class="ui-btn" onclick="stopGame()">Menu / ã‚„ã‚ã‚‹</button>
    </div>
    <div class="copyright">Â© 2026 KuniFami Soft Studio</div>
</div>

<script>
    const fileInput = document.getElementById('fileInput');
    const levelSelection = document.getElementById('levelSelection');
    const numberSwitch = document.getElementById('numberSwitch');
    const board = document.getElementById('board');
    let baseImage = "";
    let gridSize = 3;
    let currentTiles = [];
    const boardSize = 340;

    fileInput.onchange = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (event) => {
            baseImage = event.target.result;
            levelSelection.style.display = 'block';
        };
        reader.readAsDataURL(file);
    };

    function startGame(size) {
        gridSize = size;
        document.getElementById('startScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'flex';
        board.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
        resetTiles();
        shufflePuzzle();
    }

    function stopGame() {
        document.getElementById('startScreen').style.display = 'flex';
        document.getElementById('gameScreen').style.display = 'none';
    }

    function resetTiles() {
        const total = gridSize * gridSize;
        currentTiles = [];
        for (let i = 1; i < total; i++) currentTiles.push(i);
        currentTiles.push(0);
    }

    function renderBoard() {
        board.innerHTML = '';
        const showNumbers = numberSwitch.checked;

        currentTiles.forEach((tileNum, index) => {
            const div = document.createElement('div');
            if (tileNum === 0) {
                div.className = 'tile empty';
            } else {
                div.className = 'tile';
                const correctPos = tileNum - 1;
                const r = Math.floor(correctPos / gridSize), c = correctPos % gridSize;
                div.style.backgroundImage = `url(${baseImage})`;
                div.style.backgroundSize = `${boardSize}px ${boardSize}px`;
                div.style.backgroundPosition = `-${c * (boardSize/gridSize)}px -${r * (boardSize/gridSize)}px`;
                
                const numSpan = document.createElement('span');
                numSpan.className = 'tile-num' + (showNumbers ? '' : ' hidden');
                numSpan.innerText = tileNum;
                div.appendChild(numSpan);
                
                div.onclick = () => moveTile(index);
            }
            board.appendChild(div);
        });
        checkWin();
    }

    function moveTile(index) {
        const emptyIndex = currentTiles.indexOf(0);
        const r = Math.floor(index / gridSize), c = index % gridSize;
        const er = Math.floor(emptyIndex / gridSize), ec = emptyIndex % gridSize;
        if (Math.abs(r - er) + Math.abs(c - ec) === 1) {
            [currentTiles[index], currentTiles[emptyIndex]] = [currentTiles[emptyIndex], currentTiles[index]];
            renderBoard();
        }
    }

    function shufflePuzzle() {
        document.getElementById('successText').style.display = 'none';
        resetTiles();
        for (let i = 0; i < gridSize * gridSize * 50; i++) {
            const emptyIndex = currentTiles.indexOf(0);
            const r = Math.floor(emptyIndex / gridSize), c = emptyIndex % gridSize;
            let n = [];
            if (r > 0) n.push(emptyIndex - gridSize);
            if (r < gridSize - 1) n.push(emptyIndex + gridSize);
            if (c > 0) n.push(emptyIndex - 1);
            if (c < gridSize - 1) n.push(emptyIndex + 1);
            const move = n[Math.floor(Math.random() * n.length)];
            [currentTiles[emptyIndex], currentTiles[move]] = [currentTiles[move], currentTiles[emptyIndex]];
        }
        renderBoard();
    }

    function checkWin() {
        const win = currentTiles.every((t, i) => t === (i === currentTiles.length - 1 ? 0 : i + 1));
        if (win && document.getElementById('successText').style.display === 'none') {
            document.getElementById('successText').style.display = 'block';
        }
    }
</script>
</body>
</html>