<!DOCTYPE html>
<html lang="ja">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1V1ELMWFTY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-1V1ELMWFTY');
    </script>

    <meta name="ad-mode" content="kids">
    <script src="/js/ads.js" defer></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Photo Puzzle / ã—ã‚ƒã—ã‚“ãƒ‘ã‚ºãƒ« - 3ã€œ5æ­³å‘ã‘ç„¡æ–™çŸ¥è‚²ã‚¸ã‚°ã‚½ãƒ¼ãƒ‘ã‚ºãƒ«</title>
    <meta name="description" content="[JP] 3ã€œ5æ­³å‘ã‘ï¼ãŠæ°—ã«å…¥ã‚Šã®å†™çœŸã§éŠã¹ã‚‹ç„¡æ–™çŸ¥è‚²ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã€‚å½¢ã‚’èªè­˜ã™ã‚‹åŠ›ã¨é›†ä¸­åŠ›ã‚’é¤Šã„ã¾ã™ã€‚[EN] Free Photo Jigsaw Puzzle for kids aged 3-5. Turn your favorite photos into puzzles. Develops spatial recognition and focus.">
    
    <style>
        :root { --bg: #E1F5FE; --main: #0288D1; }
        * { -webkit-tap-highlight-color: transparent; user-select: none; box-sizing: border-box; }
        body {
            margin: 0; padding: 0; background: var(--bg);
            font-family: "Hiragino Sans", "Meiryo", sans-serif;
            display: flex; flex-direction: column; align-items: center; 
            height: 100vh;
            overflow: hidden;
        }

        /* --- Start Screen --- */
        #startScreen {
            position: fixed; inset: 0; z-index: 5000;
            background: linear-gradient(135deg, #81D4FA 0%, #0288D1 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            overflow-y: auto;
        }
        .start-card {
            background: white; padding: 30px; border-radius: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); width: 90%; max-width: 420px; text-align: center;
            margin: 20px 0;
        }
        .upload-area {
            border: 4px dashed #0288D1; border-radius: 20px; padding: 30px;
            margin-bottom: 20px; background: #f1faff; cursor: pointer; display: block;
        }
        .level-btn {
            width: 100%; padding: 15px; margin: 8px 0; border: none; border-radius: 50px;
            font-size: 1.2rem; font-weight: 800; cursor: pointer; color: white;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
        }
        .btn-4 { background: #FF7043; }
        .btn-9 { background: #42A5F5; }
        .btn-16 { background: #9575CD; }

        /* --- ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒ»ã‚¬ã‚¤ãƒ‰è¨­å®š --- */
        .usage-guide {
            margin-top: 15px; font-size: 0.8rem; color: #666; text-align: left;
            background: #fff3e0; padding: 12px; border-radius: 15px;
        }
        .usage-guide p { margin: 0 0 8px 0; font-weight: bold; border-bottom: 1px solid #ffcc80; padding-bottom: 3px; }
        .usage-guide ul { margin: 0; padding-left: 1.2rem; line-height: 1.5; }
        .usage-guide li { margin-bottom: 5px; }
        .lang-en { display: block; font-size: 0.75rem; color: #888; margin-top: 2px; }

        .guide-container { margin-top: 20px; text-align: left; border-top: 1px solid #eee; padding-top: 15px; width: 100%; }
        details { margin-bottom: 10px; background: #f9f9f9; border-radius: 10px; overflow: hidden; border: 1px solid #eee; }
        summary {
            padding: 12px; font-weight: bold; cursor: pointer; color: #555;
            list-style: none; display: flex; justify-content: space-between; align-items: center;
            font-size: 0.85rem;
        }
        summary::after { content: 'â–¼'; font-size: 0.7rem; color: #aaa; }
        details[open] summary::after { content: 'â–²'; }
        .guide-content { padding: 15px; font-size: 0.85rem; color: #444; line-height: 1.6; border-top: 1px solid #eee; }
        .guide-content p { margin: 0 0 10px 0; }
        .hr-dashed { border: 0; border-top: 1px dashed #ddd; margin: 10px 0; }

        /* --- Game Screen --- */
        #gameScreen { 
            display: none; 
            width: 100%; 
            height: 100%;
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            padding: 10px; 
        }
        
        .puzzle-container {
            position: relative; 
            background: #fff; border: 4px solid #fff; border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            background-size: cover;
            margin: auto;
            flex-shrink: 0; 
        }

        .piece {
            position: absolute; cursor: grab;
            border: 2px solid #fff; 
            background-repeat: no-repeat;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            touch-action: none; z-index: 10;
            border-radius: 5px;
            transition: transform 0.1s;
        }
        .piece:active { transform: scale(1.05); z-index: 1000; }
        .piece.placed { 
            cursor: default; box-shadow: none; border: 1px solid rgba(255,255,255,0.3); 
            z-index: 1; transform: none;
        }

        .success-overlay {
            display: none; position: fixed; inset: 0; z-index: 6000;
            background: rgba(255,255,255,0.9); flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
        }

        .controls-area {
            width: 100%;
            text-align: center;
            margin-top: 10px;
            margin-bottom: 5px;
            flex-shrink: 0;
        }

        .footer-links { margin: 5px 0; }
        .footer-links a { color: #888; text-decoration: none; font-size: 0.7rem; margin: 0 10px; }
        .copyright { font-size: 0.6rem; color: #999; padding-bottom: 5px; font-weight: bold; }
    </style>
</head>
<body>

<div id="startScreen">
    <div class="start-card">
        <div style="font-size: 4rem;">ğŸ“¸ğŸ§©</div>
        <h1 style="margin: 0; color: #01579B;">Photo Puzzle<br><span style="font-size:1rem;">ã—ã‚ƒã—ã‚“ãƒ‘ã‚ºãƒ«</span></h1>
        
        <label class="upload-area" for="fileInput">
            <div style="font-weight: bold; color: #0288D1;">ã“ã“ã‚’ ãŠã—ã¦ ã—ã‚ƒã—ã‚“ã‚’ ãˆã‚‰ã‚“ã§ã­<br>Tap to choose a photo</div>
            <input type="file" id="fileInput" accept="image/*" style="display: none;">
        </label>

        <div id="levelSelection" style="display: none;">
            <p style="font-weight: bold; color: #666;">ãªã‚“ãƒ”ãƒ¼ã‚¹ã«ã™ã‚‹ï¼Ÿ / How many pieces?</p>
            <button class="level-btn btn-4" onclick="initPuzzle(2)">4 ãƒ”ãƒ¼ã‚¹ / Easy</button>
            <button class="level-btn btn-9" onclick="initPuzzle(3)">9 ãƒ”ãƒ¼ã‚¹ / Normal</button>
            <button class="level-btn btn-16" onclick="initPuzzle(4)">16 ãƒ”ãƒ¼ã‚¹ / Hard</button>
        </div>
        
        <a href="./menu.html" style="display:block; margin-top:20px; color:#aaa; text-decoration:none; font-size:0.8rem;">â† Back / ã‚‚ã©ã‚‹</a>

        <div class="usage-guide">
        <p>ã€ã”åˆ©ç”¨ã‚¬ã‚¤ãƒ‰ / Usage Guideã€‘</p>
        <ul>
        <li><strong>ãŠå­æ§˜ã«ï¼š</strong>èº«è¿‘ãªå†™çœŸã‚’ä½¿ã†ã“ã¨ã§ã€å›³å½¢ã®ã€Œéƒ¨åˆ†ã¨å…¨ä½“ã€ã®é–¢ä¿‚ã‚’ç†è§£ã™ã‚‹ç©ºé–“æŠŠæ¡èƒ½åŠ›ã‚’é¤Šã„ã¾ã™ã€‚<span class="lang-en">(Develops spatial awareness by understanding part-to-whole relationships using familiar photos.)</span></li>
        <li><strong>ã‚·ãƒ‹ã‚¢ã®æ–¹ã«ï¼š</strong>ç”»åƒã®ç´°éƒ¨ã‚’æƒ³èµ·ã—ã€æŒ‡å…ˆã‚’ç´°ã‹ãå‹•ã‹ã™å‹•ä½œãŒãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã¨å·§ç·»æ€§ã‚’åˆºæ¿€ã—ã¾ã™ã€‚<span class="lang-en">(Stimulates working memory and dexterity through detailed visual recall and fine motor movements.)</span></li>
        <li><strong>æ•™è‚²é–¢ä¿‚è€…ã®çš†æ§˜ã¸ï¼š</strong>è‡ªç”±ãªç”»åƒã§ãƒ‘ã‚ºãƒ«åŒ–ã§ãã‚‹ãŸã‚ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªçŸ¥è‚²æ•™æã¨ã—ã¦æ´»ç”¨ã„ãŸã ã‘ã¾ã™ã€‚<span class="lang-en">(A customizable educational tool that can turn any image into a learning puzzle.)</span></li>
        </ul>
        </div>

        <div class="guide-container">
        <details>
        <summary>ã€ä¿è­·è€…å‘ã‘ï¼šçŸ¥è‚²ã®ç›®çš„ã€‘ / For Parents</summary>
        <div class="guide-content">
        <p><strong>Educational Goal ï¼ˆçŸ¥è‚²ã®ç›®çš„ï¼‰</strong></p>
        <p>ã“ã®ãƒ‘ã‚ºãƒ«ã‚¢ãƒ—ãƒªã¯ã€å¹¼å…æœŸã®èªçŸ¥ç™ºé”ã«ãŠã„ã¦æ¥µã‚ã¦é‡è¦ãªã€Œç©ºé–“èªçŸ¥èƒ½åŠ›ã€ã¨ã€Œæ§‹æˆçš„æƒ³åƒåŠ›ã€ã®è‚²æˆã‚’æ”¯æ´ã—ã¾ã™ã€‚ç‰¹ã«ã€èº«è¿‘ãªå®¶æ—ã‚„ãƒšãƒƒãƒˆã®å†™çœŸã‚’ãƒ‘ã‚ºãƒ«åŒ–ã™ã‚‹ã“ã¨ã§ã€ãŠå­æ§˜ã®æƒ…ç·’çš„é–¢å¿ƒã‚’å¼•ãå‡ºã—ã€é«˜ã„ã€ŒæŒç¶šçš„æ³¨æ„åŠ›ã€ã‚’ç¶­æŒã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
        
        æŠ€è¡“çš„ãªè¨­è¨ˆã¨ã—ã¦ã€ãƒ”ãƒ¼ã‚¹ãŒæ­£ã—ã„ä½ç½®ã«è¿‘ã¥ã„ãŸéš›ã«è‡ªå‹•çš„ã«å¸ç€ã™ã‚‹ã€Œã‚¹ãƒŠãƒƒãƒ—æ©Ÿèƒ½ï¼ˆsnap logicï¼‰ã€ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ç™ºé”æ®µéšã«ã‚ã‚‹ãŠå­æ§˜ã®æ‰‹æŒ‡ã®æœªç™ºé”ãªæ“ä½œæ€§ã‚’è£œã„ã€ãƒ•ãƒ©ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ€å°é™ã«æŠ‘ãˆãªãŒã‚‰ã€Œè‡ªåŠ›ã§å®Œæˆã•ã›ãŸã€ã¨ã„ã†å¼·åŠ›ãªè‡ªå·±è‚¯å®šæ„Ÿã‚’é†¸æˆã—ã¾ã™ã€‚éƒ¨åˆ†ï¼ˆãƒ”ãƒ¼ã‚¹ï¼‰ã‚’çµ„ã¿åˆã‚ã›ã¦å…¨ä½“ï¼ˆå®Œæˆå›³ï¼‰ã‚’æ§‹ç¯‰ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€è«–ç†çš„æ€è€ƒã®åŸºç¤ã¨ãªã‚Šã¾ã™ã€‚</p>
        <hr class="hr-dashed">
        <p>This puzzle app facilitates the development of "spatial cognitive skills" and "constructive imagination," essential components of early childhood development. By utilizing familiar photos, the app leverages emotional engagement to maintain "sustained attention." The implemented "snap logic" assists developing motor skills by minimizing frustration, fostering a strong sense of self-efficacy through completion. The process of synthesizing parts into a whole establishes the foundation for logical reasoning.</p>
        </div>
        </details>
        <details>
        <summary>ã€ã‚·ãƒ‹ã‚¢å‘ã‘ï¼šã‚¢ãƒ—ãƒªã®ç›®çš„ã€‘ / For Seniors</summary>
        <div class="guide-content">
            <p><strong>App Goal ï¼ˆã‚¢ãƒ—ãƒªã®ç›®çš„ï¼‰</strong></p>
            <p>æœ¬ã‚¢ãƒ—ãƒªã¯ã€ã‚·ãƒ‹ã‚¢ä¸–ä»£ã®èªçŸ¥æ©Ÿèƒ½ç¶­æŒã¨ã€Œè„³ã®è‹¥è¿”ã‚Šã€ã‚’ç›®çš„ã¨ã—ãŸãƒ‡ã‚¸ã‚¿ãƒ«ãƒ»ã‚»ãƒ©ãƒ”ãƒ¼ã®è¦–ç‚¹ã‚’å–ã‚Šå…¥ã‚Œã¦ã„ã¾ã™ã€‚ãƒ‘ã‚ºãƒ«ã‚’è§£ãéç¨‹ã§è¡Œã‚ã‚Œã‚‹ã€Œè¦–è¦šæƒ…å ±ã®èµ°æŸ»ã€ã¨ã€ŒçŸ­æœŸè¨˜æ†¶ã®ç…§åˆã€ã¯ã€å‰é ­å‰é‡ã‚’å¼·åŠ›ã«åˆºæ¿€ã—ã€ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®æ´»æ€§åŒ–ã‚’ä¿ƒã—ã¾ã™ã€‚
            
            ç‰¹ã«ã€ãŠå­«ã•ã‚“ã‚„æ—…è¡Œå…ˆã§ã®æ€ã„å‡ºã®å†™çœŸã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€å½“æ™‚ã®æƒ…æ™¯ã‚’æ€ã„å‡ºã™ã€Œå›æƒ³æ³•ã€ã«è¿‘ã„å¿ƒç†çš„åŠ¹æœã‚‚æœŸå¾…ã§ãã€æ¥½ã—ã¿ãªãŒã‚‰è„³ãƒˆãƒ¬ã‚’ç¶™ç¶šã§ãã‚‹è¨­è¨ˆã¨ãªã£ã¦ã„ã¾ã™ã€‚ã‚¿ãƒƒãƒã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚’æ»‘ã‚‰ã›ã¦ãƒ”ãƒ¼ã‚¹ã‚’æ­£ç¢ºã«é‹ã¶å‹•ä½œã¯ã€æ‰‹æŒ‡ã®ã€Œå·§ç·»æ€§ï¼ˆã“ã†ã¡ã›ã„ï¼‰ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¨ã—ã¦ã‚‚æœ€é©ã§ã‚ã‚Šã€èº«ä½“ã¨è„³ã®é€£å‹•æ€§ã‚’é«˜ã‚ã€åŠ é½¢ã«ã‚ˆã‚‹èªçŸ¥æ©Ÿèƒ½ã®ä½ä¸‹ã‚’ç·©ã‚„ã‹ã«ã™ã‚‹ä¸€åŠ©ã¨ãªã‚Šã¾ã™ã€‚</p>
            <hr class="hr-dashed">
            <p>From a digital therapy perspective, this app aims to maintain cognitive health and "brain rejuvenation" for seniors. The cycle of scanning visual info and matching it with short-term memory stimulates the prefrontal cortex and activates working memory. Using personal photos may also trigger beneficial "Reminiscence Therapy" effects. The precise movements required to drag pieces across the screen serve as fine motor skills training, improving the link between physical movement and cognitive processing.</p>
        </div>
        </details>
        </div>
        
        <div class="footer-links" style="margin-top: 20px;">
            <a href="privacy.html">Privacy</a> | <a href="contact.html">Contact</a>
        </div>
        <div class="copyright">Â© 2026 KuniFami Soft Studio</div>
    </div>
</div>

<div id="clearScreen" class="success-overlay">
    <div style="font-size: 6rem;">âœ¨ğŸ‰âœ¨</div>
    <h2 style="color: #01579B; font-size: 2rem;">ã§ããŸï¼ã™ã”ãƒ¼ã„ï¼</h2>
    <p style="font-weight: bold;">You completed the puzzle!</p>
    <button class="level-btn btn-4" style="width: 200px; background: #FF9800;" onclick="location.reload()">ã‚‚ã†ã„ã£ã‹ã„ / Play Again</button>
</div>

<div id="gameScreen">
    <div class="puzzle-container" id="puzzleContainer"></div>
    
    <div class="controls-area">
        <button class="level-btn btn-4" style="width: 160px; background: #90A4AE; font-size: 1rem; padding: 10px; margin:0;" onclick="location.reload()">Quit / ã‚„ã‚ã‚‹</button>
        
        <div class="footer-links">
            <a href="privacy.html">Privacy</a> | <a href="contact.html">Contact</a>
        </div>
        <div class="copyright">Â© 2026 KuniFami Soft Studio</div>
    </div>
</div>

<script>
    const fileInput = document.getElementById('fileInput');
    const levelSelection = document.getElementById('levelSelection');
    const container = document.getElementById('puzzleContainer');
    let baseImage = "";
    let gridSize = 2;
    
    let puzzleWidth = 300;
    let puzzleHeight = 300;
    let imgObj = null;

    fileInput.onchange = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (event) => {
            baseImage = event.target.result;
            
            imgObj = new Image();
            imgObj.onload = () => {
                levelSelection.style.display = 'block';
                fileInput.parentElement.style.background = '#E8F5E9';
                fileInput.parentElement.style.borderColor = '#4CAF50';
            };
            imgObj.src = baseImage;
        };
        reader.readAsDataURL(file);
    };

    function initPuzzle(size) {
        gridSize = size;
        document.getElementById('startScreen').style.display = 'none';
        const gameScreen = document.getElementById('gameScreen');
        gameScreen.style.display = 'flex';
        
        const maxW = window.innerWidth - 20;
        const maxH = window.innerHeight - 150;
        
        const imgRatio = imgObj.width / imgObj.height;
        const screenRatio = maxW / maxH;

        if (imgRatio > screenRatio) {
            puzzleWidth = maxW;
            puzzleHeight = maxW / imgRatio;
        } else {
            puzzleHeight = maxH;
            puzzleWidth = maxH * imgRatio;
        }

        container.style.width = puzzleWidth + 'px';
        container.style.height = puzzleHeight + 'px';
        
        container.style.backgroundImage = `linear-gradient(rgba(255,255,255,0.7), rgba(255,255,255,0.7)), url(${baseImage})`;
        container.style.backgroundSize = '100% 100%';

        container.innerHTML = '';
        
        const pieceW = puzzleWidth / gridSize;
        const pieceH = puzzleHeight / gridSize;

        for (let r = 0; r < gridSize; r++) {
            for (let c = 0; c < gridSize; c++) {
                const piece = document.createElement('div');
                piece.className = 'piece';
                piece.style.width = pieceW + 'px';
                piece.style.height = pieceH + 'px';
                piece.style.backgroundImage = `url(${baseImage})`;
                piece.style.backgroundSize = `${puzzleWidth}px ${puzzleHeight}px`;
                piece.style.backgroundPosition = `-${c * pieceW}px -${r * pieceH}px`;

                const tx = c * pieceW;
                const ty = r * pieceH;

                const randX = Math.random() * (puzzleWidth - pieceW);
                const randY = Math.random() * (puzzleHeight - pieceH);
                piece.style.left = randX + 'px';
                piece.style.top = randY + 'px';

                addEvents(piece, tx, ty, pieceW, pieceH);
                container.appendChild(piece);
            }
        }
    }

    function addEvents(el, tx, ty, pW, pH) {
        let isDragging = false;
        let offsetX, offsetY;

        const start = (e) => {
            if (el.classList.contains('placed')) return;
            isDragging = true;
            const p = e.touches ? e.touches[0] : e;
            const rect = el.getBoundingClientRect();
            offsetX = p.clientX - rect.left;
            offsetY = p.clientY - rect.top;
            el.style.zIndex = 1000;
            if (e.cancelable) e.preventDefault();
        };

        const move = (e) => {
            if (!isDragging) return;
            const p = e.touches ? e.touches[0] : e;
            const containerRect = container.getBoundingClientRect();
            
            let x = p.clientX - containerRect.left - offsetX;
            let y = p.clientY - containerRect.top - offsetY;

            x = Math.max(-10, Math.min(x, puzzleWidth - el.offsetWidth + 10));
            y = Math.max(-10, Math.min(y, puzzleHeight - el.offsetHeight + 10));

            el.style.left = x + 'px';
            el.style.top = y + 'px';
            if (e.cancelable) e.preventDefault();
        };

        const end = () => {
            if (!isDragging) return;
            isDragging = false;
            
            const cx = parseInt(el.style.left);
            const cy = parseInt(el.style.top);

            const snapX = Math.max(30, pW / 4);
            const snapY = Math.max(30, pH / 4);

            if (Math.abs(cx - tx) < snapX && Math.abs(cy - ty) < snapY) {
                el.style.left = tx + 'px';
                el.style.top = ty + 'px';
                el.classList.add('placed');
                el.style.zIndex = 1;
                checkWin();
            } else {
                el.style.zIndex = 10;
            }
        };

        el.addEventListener('mousedown', start);
        el.addEventListener('touchstart', start, {passive: false});
        window.addEventListener('mousemove', move, {passive: false});
        window.addEventListener('touchmove', move, {passive: false});
        window.addEventListener('mouseup', end);
        window.addEventListener('touchend', end);
    }

    function checkWin() {
        const placed = document.querySelectorAll('.piece.placed').length;
        if (placed === gridSize * gridSize) {
            setTimeout(() => {
                document.getElementById('clearScreen').style.display = 'flex';
            }, 500);
        }
    }
</script>
</body>
</html>