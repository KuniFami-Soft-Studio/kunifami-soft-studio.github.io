<!DOCTYPE html>
<html lang="ja">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1V1ELMWFTY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-1V1ELMWFTY');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Funny Face Maker / ç©¶æ¥µï¼ãµãã‚ã‚‰ã„ - 3ã€œ5æ­³å‘ã‘ç„¡æ–™çŸ¥è‚²ã‚²ãƒ¼ãƒ </title>
    <meta name="description" content="[JP] 3ã€œ5æ­³å‘ã‘ï¼ãƒ‘ãƒ¼ãƒ„ã‚’è‡ªç”±ã«å‹•ã‹ã—ã¦é¢ç™½ã„é¡”ã‚’ä½œã‚‹ç„¡æ–™çŸ¥è‚²ãµãã‚ã‚‰ã„ã‚²ãƒ¼ãƒ ã€‚æƒ³åƒåŠ›ã¨æ„Ÿæ€§ã‚’é¤Šã„ã¾ã™ã€‚[EN] Free Funny Face Maker (Fukuwarai) for kids aged 3-5. Move parts to create hilarious faces. Encourages creativity and imagination.">
    <meta name="keywords" content="çŸ¥è‚²ã‚²ãƒ¼ãƒ ,å­ä¾›å‘ã‘,ç„¡æ–™,ãµãã‚ã‚‰ã„,ãŠã‚‚ã¡ã‚ƒ,3æ­³,4æ­³,5æ­³,æš‡ã¤ã¶ã—,Funny Face Maker,Fukuwarai,Educational Games">
    <meta name="author" content="kunifami" >
    <meta name="robots" content="index, follow">

    <meta property="og:title" content="Funny Face Maker / ç©¶æ¥µï¼ãµãã‚ã‚‰ã„ - é›†ä¸­ãƒã‚¹ã‚¿ãƒ¼ Kids">
    <meta property="og:description" content="ãƒ‘ãƒ¼ãƒ„ã‚’ãˆã‚‰ã‚“ã§ã€ãŠã‚‚ã—ã‚ã„é¡”ã‚’ã¤ãã‚ã†ï¼ 100ç¨®é¡ä»¥ä¸Šã®çµµæ–‡å­—ãƒ‘ãƒ¼ãƒ„ã§éŠã¹ã‚‹çŸ¥è‚²ã‚²ãƒ¼ãƒ ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kunifami-soft-studio.com/kids/funny_face.html">
    <meta name="twitter:card" content="summary">

    <meta name="ad-mode" content="kids">
    <script src="/js/ads.js" defer></script>

    <style>
        :root {
            --bg: #fdfae1;
            --card: #ffffff;
            --accent: #ff7043; 
        }
        * {
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }
        body {
            font-family: "Hiragino Sans", "Meiryo", sans-serif;
            background: var(--bg);
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; margin: 0; overflow-y: auto;
            touch-action: none;
        }

        /* Start Screen / ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ */
        #startScreen {
            background: var(--bg); width: 100%; display: flex; flex-direction: column; align-items: center; padding: 20px 0;
        }
        .container {
            background: var(--card); padding: 30px; border-radius: 40px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1); text-align: center; width: 85%; max-width: 450px;
            border: 6px solid #fff; margin-top: 20px;
        }

        #gameScreen { display: none; width: 100%; height: 100vh; flex-direction: column; align-items: center; position: relative; }
        
        .face-frame {
            width: 280px; height: 320px; background: #fff;
            border: 10px solid #ffccbc; margin-top: 50px;
            border-radius: 50% 50% 45% 45%;
            position: relative; box-shadow: 0 10px 0 #ffab91;
            z-index: 1;
        }

        /* Part Container / ãƒ‘ãƒ¼ãƒ„ã‚³ãƒ³ãƒ†ãƒŠ */
        .part-container {
            position: fixed;
            width: 100px; height: 100px;
            display: flex; justify-content: center; align-items: center;
            pointer-events: none;
            z-index: 1000;
        }

        .part-controls {
            display: none;
            position: absolute;
            bottom: 110%;
            left: 50%; transform: translateX(-50%);
            flex-direction: row; gap: 6px;
            background: rgba(255,255,255,0.95); padding: 6px; border-radius: 14px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 2px solid #ff7043;
            pointer-events: auto;
            z-index: 20000;
            white-space: nowrap;
        }

        .part {
            font-size: 6rem;
            cursor: move; display: flex; align-items: center; justify-content: center;
            pointer-events: auto; transform-origin: center center;
            width: 100px; height: 100px;
        }

        .selected { z-index: 15000 !important; }
        .selected .part {
            outline: 4px dashed #ff7043; border-radius: 15px;
            background: rgba(255,112,67,0.1);
        }
        .selected .part-controls { display: flex; }

        .mini-btn {
            width: 40px; height: 40px; border-radius: 10px; background: #fff;
            border: 2px solid #ff7043; font-size: 1.1rem; font-weight: bold;
            display: flex; align-items: center; justify-content: center; color: #ff7043;
        }

        /* Shelf / æ£š */
        .shelf-outer {
            width: 100%; height: 170px; background: rgba(255,255,255,0.9);
            margin-top: auto; border-top: 4px dashed #ffccbc;
            overflow-x: auto; z-index: 100; touch-action: pan-x !important;
        }
        .shelf-inner {
            display: grid; grid-template-rows: repeat(2, 65px);
            grid-auto-flow: column; padding: 15px; gap: 12px; width: max-content;
        }
        .shelf-item-slot { width: 65px; height: 65px; display: flex; align-items: center; justify-content: center; }
        .part-in-shelf { font-size: 2.5rem; width: 55px; height: 55px; position: relative !important; cursor: pointer; }

        /* UI Elements */
        .btn-main { width: 80%; padding: 15px; background: #ff7043; color: #fff; border: none; border-radius: 35px; font-weight: 800; font-size: 1.1rem; cursor: pointer; box-shadow: 0 6px 0 #d84315; margin: 10px 0; }
        .btn-exit { position: absolute; top: 15px; right: 15px; padding: 8px 12px; background: #fff; border: 2px solid #ff7043; border-radius: 12px; color: #ff7043; font-weight: bold; z-index: 3000; font-size: 0.8rem;}
        
        /* --- ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒ»ã‚¬ã‚¤ãƒ‰è¨­å®š --- */
        .usage-guide {
            margin-top: 25px; font-size: 0.8rem; color: #666; text-align: left;
            background: #fff3e0; padding: 12px; border-radius: 15px; width: 100%;
        }
        .usage-guide p { margin: 0 0 8px 0; font-weight: bold; border-bottom: 1px solid #ffcc80; padding-bottom: 3px; }
        .usage-guide ul { margin: 0; padding-left: 1.2rem; line-height: 1.5; }
        .usage-guide li { margin-bottom: 5px; }
        .lang-en { display: block; font-size: 0.75rem; color: #888; margin-top: 2px; }

        .guide-container { margin-top: 20px; text-align: left; border-top: 1px solid #eee; padding-top: 15px; width: 100%; }
        details { margin-bottom: 10px; background: #f9f9f9; border-radius: 10px; overflow: hidden; border: 1px solid #eee; }
        summary {
            padding: 12px; font-weight: bold; cursor: pointer; color: #555;
            list-style: none; display: flex; justify-content: space-between; align-items: center;
            font-size: 0.85rem;
        }
        summary::after { content: 'â–¼'; font-size: 0.7rem; color: #aaa; }
        details[open] summary::after { content: 'â–²'; }
        .guide-content { padding: 15px; font-size: 0.85rem; color: #444; line-height: 1.6; border-top: 1px solid #eee; }
        .guide-content p { margin: 0 0 10px 0; }
        .hr-dashed { border: 0; border-top: 1px dashed #ddd; margin: 10px 0; }

        /* Footer Links for Compliance */
        .footer-links { margin: 10px 0; }
        .footer-links a { color: #888; text-decoration: none; font-size: 0.7rem; margin: 0 10px; }
        .footer-links a:hover { text-decoration: underline; }
        .copyright { font-size: 0.7rem; color: #999; margin-top: 10px; font-weight: bold; }
        .link-back { display: block; margin-top: 15px; color: #ff7043; text-decoration: none; font-size: 0.9rem; font-weight: bold; }
    </style>
</head>
<body>

<div id="startScreen">
    <div class="container">
        <h1 style="margin-bottom: 5px;">Funny Face Maker / ç©¶æ¥µï¼ãµãã‚ã‚‰ã„</h1>
        <p style="margin-top: 0; color: #ff7043; font-weight: bold;">Ultimate Funny Face Maker</p>
        
        <div style="color:#666; margin: 20px 0; font-size: 0.9rem; line-height: 1.6;">
            ãƒ‘ãƒ¼ãƒ„ã‚’é¸ã‚“ã§ã€é¡”ã‚’ä½œã‚ã†ï¼<br>
            Pick parts and make a face!
        </div>

        <button class="btn-main" onclick="startGame()">Start! / ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
        
        <a href="./menu.html" class="link-back">â† Back to Menu / ãƒ¡ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ã‚‚ã©ã‚‹</a>

        <div class="usage-guide">
            <p>ã€ã”åˆ©ç”¨ã‚¬ã‚¤ãƒ‰ / Usage Guideã€‘</p>
            <ul>
                <li><strong>ãŠå­æ§˜ã«ï¼š</strong>ç›®ã‚„å£ã®é…ç½®ã‚’é€šã˜ã¦ã€é¡”ã®æ§‹é€ ç†è§£ã¨è‡ªç”±ãªå‰µé€ æ€§ã‚’è‚²ã¿ã¾ã™ã€‚<span class="lang-en">(Develops understanding of facial structures and fosters free creativity through placement of eyes and mouths.)</span></li>
                <li><strong>ã‚·ãƒ‹ã‚¢ã®æ–¹ã«ï¼š</strong>æŒ‡å…ˆã§ã®ç´°ã‹ãªæ“ä½œã¨ã€è¡¨æƒ…ã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹å‰µé€ çš„æ´»å‹•ãŒè„³ã®åºƒç¯„å›²ã‚’åˆºæ¿€ã—ã¾ã™ã€‚<span class="lang-en">(Simulates broad brain areas through fine motor control and creative expression design.)</span></li>
                <li><strong>æ•™è‚²é–¢ä¿‚è€…ã®çš†æ§˜ã¸ï¼š</strong>æ„Ÿæƒ…è¡¨ç¾ã®ç†è§£ã‚„ã€ICTç«¯æœ«ã‚’ç”¨ã„ãŸå·§ç·»æ€§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ•™æã¨ã—ã¦ã”æ´»ç”¨ãã ã•ã„ã€‚<span class="lang-en">(Ideal as a tool for understanding emotional expression and fine motor skills training using ICT.)</span></li>
            </ul>
        </div>

        <div class="guide-container">
            <details>
                <summary>ã€ä¿è­·è€…å‘ã‘ï¼šçŸ¥è‚²ã®ç›®çš„ã€‘ / For Parents</summary>
                <div class="guide-content">
                    <p><strong>Educational Goal ï¼ˆçŸ¥è‚²ã®ç›®çš„ï¼‰</strong></p>
                    <p>ã“ã®ã€Œç©¶æ¥µï¼ãµãã‚ã‚‰ã„ã€ã¯ã€å¹¼å…æœŸã®èªçŸ¥ç™ºé”ã«ãŠã‘ã‚‹ã€Œå…¨ä½“æŠŠæ¡èƒ½åŠ›ã€ã¨ã€Œæ§‹æˆçš„æƒ³åƒåŠ›ã€ã®å‘ä¸Šã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚ãƒãƒ©ãƒãƒ©ã®çµµæ–‡å­—ãƒ‘ãƒ¼ãƒ„ã‚’ã‚­ãƒ£ãƒ³ãƒã‚¹ä¸Šã®é©åˆ‡ãªã€ã‚ã‚‹ã„ã¯æ„å¤–ãªä½ç½®ã«é…ç½®ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€ç©ºé–“æŠŠæ¡èƒ½åŠ›ã‚’é¤Šã†ã¨åŒæ™‚ã«ã€è¦–è¦šçš„ãƒ¦ãƒ¼ãƒ¢ã‚¢ã‚’é€šã˜ãŸæƒ…ç·’ã®ç™ºé”ã‚’ä¿ƒã—ã¾ã™ã€‚
                    ã¾ãŸã€ãƒ‘ãƒ¼ãƒ„ã®ã‚µã‚¤ã‚ºå¤‰æ›´ï¼ˆï¼‹/ãƒ¼ï¼‰ã‚„åè»¢ï¼ˆâ†”ï¼‰æ©Ÿèƒ½ã®æ“ä½œã¯ã€ICTæ©Ÿå™¨ç‰¹æœ‰ã®æ“ä½œæ¦‚å¿µã‚’å­¦ã¶åŸºç¤ã¨ãªã‚Šã¾ã™ã€‚æ­£è§£ã®ãªã„éŠã³ã®ä¸­ã§è©¦è¡ŒéŒ¯èª¤ã‚’ç¹°ã‚Šè¿”ã™ã“ã¨ã¯ã€è‡ªå·±è‚¯å®šæ„Ÿã‚’é«˜ã‚ã€ã€Œè‡ªåˆ†è‡ªèº«ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å½¢ã«ã™ã‚‹ã€ã¨ã„ã†éèªçŸ¥èƒ½åŠ›ã®è‚²æˆã«ã‚‚å¯„ä¸ã—ã¾ã™ã€‚å¤šç¨®å¤šæ§˜ãªçµµæ–‡å­—ã«è§¦ã‚Œã‚‹ã“ã¨ã§ã€è¦–è¦šçš„è­˜åˆ¥èƒ½åŠ›ã‚‚åŒæ™‚ã«é«˜ã¾ã‚Šã¾ã™ã€‚</p>
                    <hr class="hr-dashed">
                    

[Image of cognitive development milestones in early childhood]

                    <p>This "Ultimate Fukuwarai" app is designed to enhance "holistic perception" and "constructive imagination" during early cognitive development. The process of arranging scattered emoji parts into appropriateâ€”or intentionally humorousâ€”positions on the canvas nurtures spatial awareness and emotional intelligence through visual humor. Operations like resizing and flipping components introduce foundational ICT concepts. Engaging in open-ended play fosters self-esteem and non-cognitive skills such as turning personal ideas into reality. Exposure to a diverse range of emojis also refines visual discrimination skills.</p>
                </div>
            </details>
            <details>
                <summary>ã€ã‚·ãƒ‹ã‚¢å‘ã‘ï¼šã‚¢ãƒ—ãƒªã®ç›®çš„ã€‘ / For Seniors</summary>
                <div class="guide-content">
                    <p><strong>App Goal ï¼ˆã‚¢ãƒ—ãƒªã®ç›®çš„ï¼‰</strong></p>
                    <p>æœ¬ã‚¢ãƒ—ãƒªã¯ã€ã‚·ãƒ‹ã‚¢ä¸–ä»£ã®èªçŸ¥æ©Ÿèƒ½ç¶­æŒã«é‡è¦ãªã€Œå‰é ­å‰é‡ã®æ´»æ€§åŒ–ã€ã¨ã€Œæ‰‹æŒ‡ã®å·§ç·»æ€§ã€ã®ç¶­æŒã‚’ç›®çš„ã¨ã—ãŸãƒ‡ã‚¸ã‚¿ãƒ«ãƒ»ã‚»ãƒ©ãƒ”ãƒ¼ã®å´é¢ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒ„ã‚’é¸æŠã—ã€ç‹™ã£ãŸä½ç½®ã¾ã§ãƒ‰ãƒ©ãƒƒã‚°ã™ã‚‹ä¸€é€£ã®å‹•ä½œã¯ã€è„³ã®æŒ‡ä»¤ã‚’æ­£ç¢ºã«æŒ‡å…ˆã«ä¼ãˆã‚‹æ‰‹ã¨ç›®ã®å”èª¿æ€§ã‚’é›ãˆã¾ã™ã€‚
                    ã•ã‚‰ã«ã€ã€Œé¢ç™½ã„è¡¨æƒ…ã‚’ä½œã‚‹ã€ã¨ã„ã†å‰µé€ çš„ãªæ„å›³ã‚’æŒã¤ä½œæ¥­ã¯ã€ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªï¼ˆä½œæ¥­è¨˜æ†¶ï¼‰ã‚’åˆºæ¿€ã—ã€ç²¾ç¥çš„ãªãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ï¼ˆãƒªãƒ©ã‚¯ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰åŠ¹æœã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚ä¼çµ±çš„ãªã€Œãµãã‚ã‚‰ã„ã€ã¨ã„ã†é¦´æŸ“ã¿ã®ã‚ã‚‹é¡Œæã‚’æœ€æ–°ã®ãƒ‡ãƒã‚¤ã‚¹ã§ä½“é¨“ã™ã‚‹ã“ã¨ã§ã€ãƒ‡ã‚¸ã‚¿ãƒ«ã¸ã®æŠµæŠ—æ„Ÿã‚’æ¸›ã‚‰ã—ã€çŸ¥çš„å¥½å¥‡å¿ƒã‚’åˆºæ¿€ã™ã‚‹ãƒã‚¸ãƒ†ã‚£ãƒ–ãªè„³ãƒˆãƒ¬ç¿’æ…£ã‚’æä¾›ã—ã¾ã™ã€‚</p>
                    <hr class="hr-dashed">
                    

[Image of human brain anatomy prefrontal cortex]

                    <p>This application serves as a digital therapy tool aimed at "prefrontal cortex activation" and maintaining "fine motor skills" essential for senior cognitive health. The sequence of selecting and dragging parts to specific locations exercises hand-eye coordination, ensuring neural commands are accurately translated to fingertip movements. Furthermore, the creative act of designing a "funny face" stimulates working memory and provides a refreshing, relaxing mental break. Experiencing the familiar traditional "Fukuwarai" game on modern devices reduces digital hesitation and provides a brain-training habit that sparks intellectual curiosity.</p>
                </div>
            </details>
        </div>

        <div class="footer-links" style="margin-top: 20px;">
            <a href="privacy.html">Privacy Policy / è¦ç´„</a>
            <a href="contact.html">Contact / ãŠå•ã„åˆã‚ã›</a>
        </div>
        <div class="copyright">Â© 2026 KuniFami Soft Studio</div>
    </div>
</div>

<div id="gameScreen">
    <button class="btn-exit" onclick="stopGame()">Quit / ãŠã‚ã‚‹</button>
    
    <div id="faceCanvas" class="face-frame"></div>

    <div class="shelf-outer">
        <div class="shelf-inner" id="shelf"></div>
    </div>

    <div style="width: 100%; text-align: center; background: #fff; padding-bottom: 20px;">
        <button class="btn-main" onclick="resetAll()">Clear All / ãœã‚“ã¶æ¶ˆã™</button>
        <div class="footer-links">
            <a href="privacy.html">Privacy Policy / è¦ç´„</a>
            <a href="contact.html">Contact / ãŠå•ã„åˆã‚ã›</a>
        </div>
        <div class="copyright">Â© 2026 KuniFami Soft Studio</div>
    </div>
</div>

<script>
    const emojiParts = ['ğŸ‘€','ğŸ‘ï¸','ğŸ™„','ğŸ¤©','ğŸ˜‰','ğŸ˜‘','ğŸ¤£','ğŸ˜²','ğŸ˜´','ğŸ¥º','ğŸ§¿','ğŸ‘º','ğŸ‘½','ğŸ¤¨','ã€°ï¸','ğŸ”¥','âš¡','ğŸ‘ƒ','ğŸ½','ğŸ‘„','ğŸ‘…','ğŸ˜‹','ğŸ¦·','ğŸ’‹','ğŸ˜®','ğŸ˜«','ğŸ¤«','ğŸ¤¥','ğŸ¤®','ğŸ¤¡','ğŸ‘¹','ğŸ¤','ğŸ‘‚','ğŸ§”','ğŸ§”â€â™‚ï¸','ğŸ±','ğŸ¶','ğŸ°','ğŸ¦','ğŸ•¶ï¸','ğŸ‘“','ğŸ¥½','ğŸ©','ğŸ‘‘','ğŸ€','ğŸ“','ğŸ¤ ','âœ¨','ğŸ’','ğŸ§','ğŸˆ','ğŸ','ğŸ–','ğŸ¥','âš½','ğŸ’£','ğŸŒ€','â¤ï¸','â­','ğŸ’¢','ğŸ’¦','ğŸ’©'];

    const shelf = document.getElementById('shelf');
    const gameScreen = document.getElementById('gameScreen');
    let activeContainer = null;
    let selectedContainer = null;
    let offsetX, offsetY;

    function initShelf() {
        shelf.innerHTML = '';
        emojiParts.forEach(emoji => {
            const slot = document.createElement('div');
            slot.className = 'shelf-item-slot';
            const p = document.createElement('div');
            p.className = 'part part-in-shelf';
            p.innerText = emoji;
            slot.appendChild(p);
            shelf.appendChild(slot);
            p.addEventListener('touchstart', spawnPart, {passive: false});
            p.addEventListener('mousedown', spawnPart);
        });
    }

    function spawnPart(e) {
        e.preventDefault();
        const master = e.target;
        const rect = master.getBoundingClientRect();

        const container = document.createElement('div');
        container.className = 'part-container';
        container.dataset.scale = 1;
        container.dataset.flip = 1;
        
        container.innerHTML = `
            <div class="part-controls" onmousedown="event.stopPropagation()" ontouchstart="event.stopPropagation()">
                <div class="mini-btn" onclick="resizePart(1.2)">ï¼‹</div>
                <div class="mini-btn" onclick="resizePart(0.8)">ãƒ¼</div>
                <div class="mini-btn" onclick="flipPart()">â†”</div>
                <div class="mini-btn" onclick="deletePart()" style="color:#d32f2f; border-color:#d32f2f;">ğŸ—‘ï¸</div>
            </div>
            <div class="part">${master.innerText}</div>
        `;
        
        gameScreen.appendChild(container);
        
        container.style.left = (rect.left + rect.width/2 - 50) + 'px'; 
        container.style.top = (rect.top + rect.height/2 - 50) + 'px';

        const partEl = container.querySelector('.part');
        partEl.addEventListener('touchstart', onPartTouch, {passive: false});
        partEl.addEventListener('mousedown', onPartTouch);

        selectPart(container);
        activeContainer = container;
        startDragging(e);
    }

    function onPartTouch(e) {
        e.preventDefault();
        e.stopPropagation();
        const container = e.target.closest('.part-container');
        selectPart(container);
        activeContainer = container;
        startDragging(e);
    }

    function selectPart(c) {
        if (selectedContainer) selectedContainer.classList.remove('selected');
        selectedContainer = c;
        selectedContainer.classList.add('selected');
    }

    function startDragging(e) {
        const pointer = e.type.includes('touch') ? e.touches[0] : e;
        offsetX = pointer.clientX - activeContainer.offsetLeft;
        offsetY = pointer.clientY - activeContainer.offsetTop;

        const moveEv = e.type.includes('touch') ? 'touchmove' : 'mousemove';
        const endEv = e.type.includes('touch') ? 'touchend' : 'mouseup';
        
        document.addEventListener(moveEv, onMove, {passive: false});
        document.addEventListener(endEv, endMove);
    }

    function onMove(e) {
        if (!activeContainer) return;
        e.preventDefault();
        const pointer = e.type.includes('touch') ? e.touches[0] : e;
        activeContainer.style.left = (pointer.clientX - offsetX) + 'px';
        activeContainer.style.top = (pointer.clientY - offsetY) + 'px';
    }

    function endMove() {
        activeContainer = null;
        document.removeEventListener('touchmove', onMove);
        document.removeEventListener('mousemove', onMove);
    }

    window.resizePart = function(factor) {
        if (!selectedContainer) return;
        let s = parseFloat(selectedContainer.dataset.scale) * factor;
        if (s < 0.2 || s > 8) return;
        selectedContainer.dataset.scale = s;
        updateTransform();
    };

    window.flipPart = function() {
        if (!selectedContainer) return;
        selectedContainer.dataset.flip *= -1;
        updateTransform();
    };

    function updateTransform() {
        const s = selectedContainer.dataset.scale;
        const f = selectedContainer.dataset.flip;
        const part = selectedContainer.querySelector('.part');
        part.style.transform = `scale(${s * f}, ${s})`;
    }

    window.deletePart = function() {
        if (selectedContainer) {
            selectedContainer.remove();
            selectedContainer = null;
        }
    };

    function resetAll() {
        if(confirm("ãœã‚“ã¶æ¶ˆã—ã¾ã™ã‹ï¼Ÿ\nClear all?")) {
            document.querySelectorAll('.part-container').forEach(c => c.remove());
            selectedContainer = null;
        }
    }

    function startGame() {
        document.getElementById('startScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'flex';
        initShelf();
    }

    function stopGame() {
        document.getElementById('startScreen').style.display = 'block';
        document.getElementById('gameScreen').style.display = 'none';
    }
</script>
</body>
</html>