<!DOCTYPE html>
<html lang="ja">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1V1ELMWFTY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-1V1ELMWFTY');
    </script>

    <meta name="ad-mode" content="kids">
    <script src="/js/ads.js" defer></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>キラキラまんげきょう / Magic Kaleidoscope - 3〜5歳向け無料知育アプリ</title>
    <meta name="description" content="[JP] なぞるだけで魔法のような模様が広がる、3〜5歳向けの無料知育万華鏡。色彩感覚と創造力を養います。[EN] Free educational kaleidoscope game for kids. Create magic patterns by tracing. Perfect for developing creativity.">
    <meta name="keywords" content="知育ゲーム,無料,子供向け,万華鏡,Kaleidoscope,Educational Games,Toddler Games">
    <meta name="author" content="kunifami" >
    <meta name="robots" content="index, follow">

    <meta property="og:title" content="キラキラまんげきょう / Magic Kaleidoscope - 集中マスター Kids">
    <meta property="og:description" content="なぞるだけで きれい！じぶんだけの まんげきょうを つくってみよう！">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kunifami-soft-studio.com/kids/kaleidoscope.html">
    <meta name="twitter:card" content="summary">
    
    <style>
        :root {
            --primary: #ff69b4;
            --bg: #000000;
        }
        * {
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            touch-action: none;
        }
        body {
            margin: 0; padding: 0; background: var(--bg);
            font-family: "Hiragino Sans", "Meiryo", sans-serif;
            overflow-x: hidden; color: white;
            display: flex; flex-direction: column; align-items: center;
        }

        /* 第一画面 / Start Screen */
        .start-container {
            position: relative; width: 100%; min-height: 100vh;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            text-align: center; padding: 20px 0; overflow-y: auto;
        }
        .start-card {
            background: rgba(255,255,255,0.9); padding: 30px; border-radius: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); width: 85%; max-width: 400px; color: #333;
            margin-top: 20px;
        }
        .btn-start {
            background: #ff4081; color: white; border: none; padding: 15px 40px;
            font-size: 1.5rem; font-weight: bold; border-radius: 50px; cursor: pointer;
            box-shadow: 0 6px 0 #c2185b; transition: 0.2s; margin: 20px 0;
        }
        .btn-start:active { transform: translateY(4px); box-shadow: 0 2px 0 #c2185b; }

        /* --- アコーディオン・ガイド設定 --- */
        .usage-guide {
            margin-top: 15px; font-size: 0.8rem; color: #666; text-align: left;
            background: #fff3e0; padding: 12px; border-radius: 15px;
        }
        .usage-guide p { margin: 0 0 8px 0; font-weight: bold; border-bottom: 1px solid #ffcc80; padding-bottom: 3px; }
        .usage-guide ul { margin: 0; padding-left: 1.2rem; line-height: 1.5; }
        .usage-guide li { margin-bottom: 5px; }
        .lang-en { display: block; font-size: 0.75rem; color: #888; margin-top: 2px; }

        .guide-container { margin-top: 20px; text-align: left; border-top: 1px solid #eee; padding-top: 15px; width: 85%; max-width: 400px; }
        details { margin-bottom: 10px; background: #f9f9f9; border-radius: 10px; overflow: hidden; }
        summary {
            padding: 12px; font-weight: bold; cursor: pointer; color: #555;
            list-style: none; display: flex; justify-content: space-between; align-items: center;
            font-size: 0.85rem;
        }
        summary::after { content: '▼'; font-size: 0.7rem; color: #aaa; }
        details[open] summary::after { content: '▲'; }
        .guide-content { padding: 15px; font-size: 0.85rem; color: #444; line-height: 1.6; border-top: 1px solid #eee; }
        .guide-content p { margin: 0 0 10px 0; }
        .hr-dashed { border: 0; border-top: 1px dashed #ddd; margin: 10px 0; }

        /* メイン画面 / Main Screen */
        #gameScreen { display: none; width: 100vw; height: 100vh; position: fixed; top: 0; left: 0; z-index: 6000; }
        canvas { width: 100%; height: 100%; display: block; }

        /* 操作パネル */
        .ui-overlay {
            position: absolute; top: 15px; left: 15px; right: 15px;
            display: flex; justify-content: space-between; align-items: flex-start;
            pointer-events: none;
        }
        .ui-btn {
            background: rgba(255,255,255,0.8); border: none; padding: 10px 15px;
            border-radius: 15px; font-weight: bold; pointer-events: auto;
            color: #333; font-size: 0.8rem;
        }

        /* 信頼性・規約エリア */
        .footer-links { margin-top: 15px; }
        .footer-links a { color: #888; text-decoration: none; font-size: 0.7rem; margin: 0 10px; }
        .footer-links a:hover { text-decoration: underline; }

        .copyright { font-size: 0.6rem; color: #aaa; padding: 10px; text-align: center; width: 100%; }
    </style>
</head>
<body>

<div class="start-container" id="startScreen">
    <div class="start-card">
        <div style="font-size: 4rem; margin-bottom: 10px;">✨</div>
        <h1 style="margin: 0; color: #ff4081;">キラキラまんげきょう</h1>
        <p style="margin: 5px 0; font-weight: bold; color: #666;">Magic Kaleidoscope</p>
        
        <p style="font-size: 0.9rem; color: #888;">
            なぞって 魔法の模様を作ろう！<br>
            Trace to make magic patterns!
        </p>

        <button class="btn-start" onclick="startGame()">Start! / はじめる</button>

        <a href="./menu.html" style="display:block; margin-top:5px; color:#aaa; text-decoration:none; font-size:0.8rem;">← もどる / Back</a>

        <div class="usage-guide">
            <p>【ご利用ガイド / Usage Guide】</p>
            <ul>
                <li><strong>お子様に：</strong>指先の動きが幾何学模様に変わる驚きを通じて、空間認知能力と色彩感覚を育みます。<span class="lang-en">(Nurtures spatial awareness and color sense through the wonder of geometric patterns.)</span></li>
                <li><strong>シニアの方に：</strong>対称的な図形を構成する創造的活動が、前頭前野を刺激し脳の活性化を助けます。<span class="lang-en">(Stimulates the prefrontal cortex through creative activities involving symmetry.)</span></li>
                <li><strong>教育関係者の皆様へ：</strong>幾何学的な「対称性」を視覚的に体験できるICT教材としてご活用ください。<span class="lang-en">(Use as an ICT tool to visually experience geometric symmetry.)</span></li>
            </ul>
        </div>

        <div class="guide-container">
            <details>
                <summary>【保護者向け：知育の目的】 / For Parents</summary>
                <div class="guide-content">
                    <p><strong>Educational Goal （知育の目的）</strong></p>
                    <p>このアプリは、幼児期の認知発達において重要な「視覚運動統合（Visuomotor Integration）」と「空間的規則性」の理解を深めるために設計されています。
                    
                    画面をなぞるという単純な動作に対して、6つの対称軸を持つ万華鏡状のフィードバックが即座に返されることで、お子様は「自分の行動が複雑で美しい結果を生む」という自己肯定感を強く実感します。
                    内部ロジックでは、HSLA色空間を用いた動的な色変化（Hue cycling）を採用しており、色彩感覚の閾値を広げるとともに、図形の「対称性（シンメトリー）」という数学的思考の基礎を遊びの中で自然に習得させます。</p>
                    <hr class="hr-dashed">
                    <p>This application is designed to deepen the understanding of "Visuomotor Integration" and spatial regularity. By providing immediate kaleidoscopic feedback with six axes of symmetry, it reinforces a child's sense of self-efficacy—the realization that their actions produce complex, beautiful results. The internal logic utilizes dynamic HSLA color cycling to expand color sensitivity while intuitively teaching the mathematical foundation of symmetry through play.</p>
                </div>
            </details>
            <details>
                <summary>【シニア向け：アプリの目的】 / For Seniors</summary>
                <div class="guide-content">
                    <p><strong>App Goal （アプリの目的）</strong></p>
                    <p>本アプリは、シニア世代の皆様の「脳の活性化」と「精神的なリラクゼーション」を目的としたデジタルセラピーの視点を取り入れています。
                    
                    指先を動かして図形を構成する動作（巧緻性）は前頭前野を刺激し、ワーキングメモリを活性化させます。また、黒い背景に映える鮮やかな色彩の変化は、視覚野へのポジティブな刺激となり、認知機能の維持をサポートします。万華鏡特有の規則正しい模様の広がりは、心理的な安心感をもたらし、日々のストレス解消やQOL（生活の質）の向上に寄与します。直感的な操作性により、デジタルデバイスへの抵抗感を軽減しながら、楽しみつつ脳の健康維持に取り組めます。</p>
                    <hr class="hr-dashed">
                    <p>This app incorporates perspectives from digital therapy aimed at brain activation and mental relaxation for seniors. Fine motor movements used to create patterns stimulate the prefrontal cortex and activate working memory. The vibrant color transitions against a dark background provide positive visual stimulation, supporting cognitive health. The orderly expansion of kaleidoscopic patterns offers psychological comfort, contributing to stress relief and improved Quality of Life (QOL). Its intuitive interface reduces digital hesitation, making brain maintenance an enjoyable part of daily life.</p>
                </div>
            </details>
        </div>

        <div class="footer-links">
            <a href="privacy.html">Privacy Policy / 規約</a>
            <a href="contact.html">Contact / お問い合わせ</a>
        </div>
        <div class="copyright">© 2026 KuniFami Soft Studio</div>
    </div>
</div>

<div id="gameScreen">
    <div class="ui-overlay">
        <button class="ui-btn" onclick="clearCanvas()">ぜんぶ消す / Clear</button>
        <button class="ui-btn" onclick="stopGame()">Quit / おわる</button>
    </div>

    <canvas id="kaleidoscope"></canvas>
</div>

<script>
    const canvas = document.getElementById('kaleidoscope');
    const ctx = canvas.getContext('2d');
    let isDrawing = false;
    let hue = 0;

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function startGame() {
        document.getElementById('startScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'block';
        clearCanvas();
        if(typeof gtag === 'function') { gtag('event', 'game_start', {'game_name': 'kaleidoscope'}); }
    }

    function stopGame() {
        document.getElementById('startScreen').style.display = 'flex';
        document.getElementById('gameScreen').style.display = 'none';
    }

    function clearCanvas() {
        ctx.fillStyle = '#000';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    function draw(e) {
        if (!isDrawing) return;

        const x = (e.touches ? e.touches[0].clientX : e.clientX);
        const y = (e.touches ? e.touches[0].clientY : e.clientY);
        
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const relX = x - centerX;
        const relY = y - centerY;

        hue += 2;
        ctx.strokeStyle = `hsla(${hue}, 80%, 60%, 0.8)`;
        ctx.lineWidth = 15;
        ctx.lineCap = 'round';

        for (let i = 0; i < 6; i++) {
            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.rotate((i * 60) * Math.PI / 180);
            
            ctx.beginPath();
            ctx.moveTo(relX, relY);
            ctx.lineTo(relX, -relY);
            ctx.stroke();
            
            ctx.restore();
        }
    }

    canvas.addEventListener('mousedown', () => isDrawing = true);
    canvas.addEventListener('touchstart', () => isDrawing = true);
    window.addEventListener('mouseup', () => isDrawing = false);
    window.addEventListener('touchend', () => isDrawing = false);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('touchmove', draw);

</script>
</body>
</html>