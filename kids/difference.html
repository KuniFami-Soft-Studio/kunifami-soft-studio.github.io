<!DOCTYPE html>
<html lang="ja">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1V1ELMWFTY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-1V1ELMWFTY');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Differences / ã¾ã¡ãŒã„ã•ãŒã—</title>
    <style>
        :root { --bg: #E3F2FD; --card: #ffffff; --accent: #2196F3; }
        body {
            font-family: "Hiragino Sans", "Meiryo", sans-serif;
            background: var(--bg); margin: 0; overflow: hidden; touch-action: none;
            display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh;
        }
        .container {
            background: var(--card); padding: 25px; border-radius: 40px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.05); text-align: center; width: 90%; max-width: 450px;
            border: 6px solid #fff; position: relative; z-index: 10;
        }
        #gameScreen { display: none; position: fixed; inset: 0; background: #fff; z-index: 100; flex-direction: column; align-items: center; justify-content: center; }
        
        .quiz-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;
            padding: 20px; background: #f8f9fa; border-radius: 30px; margin-bottom: 20px;
        }
        .item-btn {
            font-size: 3.5rem; background: white; border: 3px solid #e3f2fd;
            border-radius: 20px; width: 85px; height: 85px; display: flex;
            align-items: center; justify-content: center; cursor: pointer;
            transition: transform 0.1s; -webkit-user-select: none;
        }
        .item-btn:active { transform: scale(0.9); }
        .item-btn.correct { background: #c8e6c9; border-color: #4caf50; animation: jump 0.5s; }
        .item-btn.wrong { background: #ffcdd2; border-color: #f44336; }

        @keyframes jump {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .status-text { height: 80px; font-size: 1.4rem; font-weight: 900; color: #1976D2; margin-bottom: 10px; line-height: 1.2; text-align: center; }
        .status-text small { font-size: 0.9rem; color: #64B5F6; display: block; }

        .btn-exit { position: absolute; top: 20px; right: 20px; padding: 10px 18px; background: #fff; border: 2px solid #eee; border-radius: 15px; font-weight: bold; z-index: 150; }
        .btn-main { width: 100%; padding: 18px; background: var(--accent); color: white; border: none; border-radius: 25px; font-weight: 800; font-size: 1.2rem; cursor: pointer; box-shadow: 0 6px 0 #1565C0; }

        .footer-copyright {
            margin-top: 20px; font-size: 0.7rem; color: #ccc;
            text-align: center; font-family: sans-serif;
        }
    </style>
</head>
<body>

<div class="container" id="startScreen">
    <h1>ğŸ” ã¾ã¡ãŒã„ã•ãŒã—</h1>
    <div style="font-size: 0.9rem; color: #999; margin-bottom: 15px;">ã©ã‚ŒãŒ ã¡ãŒã†ã‹ãªï¼Ÿ</div>
    <div style="background: #e3f2fd; padding: 15px; border-radius: 20px; text-align: left; font-size: 0.85rem; margin-bottom: 15px; border: 2px dashed #90CAF9;">
        <div>ğŸ’ <strong>ã„ã‚ã‚“ãª ãªã‹ã¾ ãŒ ç™»å ´ï¼</strong><br>Many items appearing!</div>
        <div style="margin-top:8px;">ğŸ¯ <strong>ã¡ãŒã†ã®ã‚’ ã¿ã¤ã‘ã‚‰ã‚Œã‚‹ã‹ãªï¼Ÿ</strong><br>Can you find the different one?</div>
    </div>
    <button class="btn-main" onclick="startGame()">Start! / ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
    <a href="./menu.html" style="display:block; margin-top:15px; color:#aaa; text-decoration:none; font-size:0.8rem;">â† Back / ã‚‚ã©ã‚‹</a>
    
    <div class="footer-copyright">
        Â© 2026 KuniFami Soft Studio. All Rights Reserved.
    </div>
</div>

<div id="gameScreen">
    <button class="btn-exit" onclick="stopGame()">Quit / ãŠã‚ã‚‹</button>
    <div id="statusLabel" class="status-text"></div>
    <div class="quiz-grid" id="quizGrid"></div>
</div>

<script>
    const masterData = [
        {i:'ğŸ¶',j:'ã„ã¬',e:'Dog'},{i:'ğŸ±',j:'ã­ã“',e:'Cat'},{i:'ğŸ­',j:'ã­ãšã¿',e:'Mouse'},{i:'ğŸ¹',j:'ã¯ã‚€ã™ãŸãƒ¼',e:'Hamster'},{i:'ğŸ°',j:'ã†ã•ã',e:'Rabbit'},
        {i:'ğŸ¦Š',j:'ãã¤ã­',e:'Fox'},{i:'ğŸ»',j:'ãã¾',e:'Bear'},{i:'ğŸ¼',j:'ã±ã‚“ã ',e:'Panda'},{i:'ğŸ¨',j:'ã“ã‚ã‚‰',e:'Koala'},{i:'ğŸ¯',j:'ã¨ã‚‰',e:'Tiger'},
        {i:'ğŸ¦',j:'ã‚‰ã„ãŠã‚“',e:'Lion'},{i:'ğŸ®',j:'ã†ã—',e:'Cow'},{i:'ğŸ·',j:'ã¶ãŸ',e:'Pig'},{i:'ğŸ¸',j:'ã‹ãˆã‚‹',e:'Frog'},{i:'ğŸµ',j:'ã•ã‚‹',e:'Monkey'},
        {i:'ğŸ£',j:'ã²ã‚ˆã“',e:'Chick'},{i:'ğŸ§',j:'ãºã‚“ãã‚“',e:'Penguin'},{i:'ğŸ¦’',j:'ãã‚Šã‚“',e:'Giraffe'},{i:'ğŸ˜',j:'ãã†',e:'Elephant'},{i:'ğŸ¦“',j:'ã—ã¾ã†ã¾',e:'Zebra'},
        {i:'ğŸ',j:'ã‚Šã‚“ã”',e:'Apple'},{i:'ğŸ',j:'ã‚ãŠã‚Šã‚“ã”',e:'Green Apple'},{i:'ğŸ',j:'ãªã—',e:'Pear'},{i:'ğŸŠ',j:'ã¿ã‹ã‚“',e:'Orange'},{i:'ğŸ‹',j:'ã‚Œã‚‚ã‚“',e:'Lemon'},
        {i:'ğŸŒ',j:'ã°ãªãª',e:'Banana'},{i:' watermelon ',j:'ã™ã„ã‹',e:'Watermelon'},{i:'ğŸ‡',j:'ã¶ã©ã†',e:'Grapes'},{i:'ğŸ“',j:'ã„ã¡ã”',e:'Strawberry'},{i:'ğŸˆ',j:'ã‚ã‚ã‚“',e:'Melon'},
        {i:'ğŸ’',j:'ã•ãã‚‰ã‚“ã¼',e:'Cherry'},{i:'ğŸ‘',j:'ã‚‚ã‚‚',e:'Peach'},{i:'ğŸ',j:'ã±ã„ãªã£ã·ã‚‹',e:'Pineapple'},{i:'ğŸ¥',j:'ãã†ã„',e:'Kiwi'},{i:'ğŸ…',j:'ã¨ã¾ã¨',e:'Tomato'},
        {i:'ğŸŒ½',j:'ã¨ã†ã‚‚ã‚ã“ã—',e:'Corn'},{i:'ğŸ¥•',j:'ã«ã‚“ã˜ã‚“',e:'Carrot'},{i:'ğŸ„',j:'ãã®ã“',e:'Mushroom'},{i:'ğŸ',j:'ã±ã‚“',e:'Bread'},
        {i:'ğŸ¦',j:'ã‚ã„ã™',e:'Ice Cream'},{i:'ğŸ©',j:'ã©ãƒ¼ãªã¤',e:'Donut'},{i:'ğŸª',j:'ãã£ããƒ¼',e:'Cookie'},{i:'ğŸ«',j:'ã¡ã‚‡ã“ã‚Œãƒ¼ã¨',e:'Chocolate'},{i:'ğŸ­',j:'ã‚ã‚',e:'Candy'},
        {i:'ğŸ®',j:'ã·ã‚Šã‚“',e:'Pudding'},{i:'ğŸ°',j:'ã‘ãƒ¼ã',e:'Cake'},{i:'ğŸ•',j:'ã´ã–',e:'Pizza'},{i:'ğŸ”',j:'ã¯ã‚“ã°ãƒ¼ãŒãƒ¼',e:'Hamburger'},{i:'ğŸŸ',j:'ã½ã¦ã¨',e:'Fries'},
        {i:'ğŸš—',j:'ãã‚‹ã¾',e:'Car'},{i:'ğŸš•',j:'ãŸãã—ãƒ¼',e:'Taxi'},{i:'ğŸš™',j:'ã˜ãƒ¼ã·',e:'SUV'},{i:'ğŸšŒ',j:'ã°ã™',e:'Bus'},{i:'ğŸš“',j:'ã±ã¨ã‹ãƒ¼',e:'Police Car'},
        {i:'ğŸš‘',j:'ãã‚…ã†ãã‚…ã†ã—ã‚ƒ',e:'Ambulance'},{i:'ğŸš’',j:'ã—ã‚‡ã†ã¼ã†ã—ã‚ƒ',e:'Fire Engine'},{i:'ğŸš',j:'ã‚ã”ã‚“ã—ã‚ƒ',e:'Van'},
        {i:'ğŸšš',j:'ã¨ã‚‰ã£ã',e:'Truck'},{i:'ğŸšœ',j:'ã¨ã‚‰ããŸãƒ¼',e:'Tractor'},{i:'ğŸš²',j:'ã˜ã¦ã‚“ã—ã‚ƒ',e:'Bicycle'},{i:'ğŸ›µ',j:'ã™ããƒ¼ãŸãƒ¼',e:'Scooter'},{i:'ğŸï¸',j:'ãŠãƒ¼ã¨ã°ã„',e:'Motorcycle'},
        {i:'ğŸš‚',j:'ãã‹ã‚“ã—ã‚ƒ',e:'Steam Train'},{i:'ğŸš†',j:'ã§ã‚“ã—ã‚ƒ',e:'Train'},{i:'ğŸš€',j:'ã‚ã‘ã£ã¨',e:'Rocket'},{i:'ğŸš',j:'ã¸ã‚Šã“ã·ãŸãƒ¼',e:'Helicopter'},{i:'âœˆï¸',j:'ã²ã“ã†ã',e:'Airplane'},
        {i:'ğŸ™',j:'ãŸã“',e:'Octopus'},{i:'ğŸ¦‘',j:'ã„ã‹',e:'Squid'},{i:'ğŸ¦',j:'ãˆã³',e:'Shrimp'},{i:'ğŸ¦€',j:'ã‹ã«',e:'Crab'},
        {i:'ğŸ ',j:'ã•ã‹ãª',e:'Fish'},{i:'ğŸ¬',j:'ã„ã‚‹ã‹',e:'Dolphin'},{i:'ğŸ³',j:'ãã˜ã‚‰',e:'Whale'},{i:'ğŸ¦ˆ',j:'ã•ã‚',e:'Shark'},{i:'ğŸš',j:'ã‹ã„',e:'Shell'},
        {i:'ğŸ¦‹',j:'ã¡ã‚‡ã†ã¡ã‚‡',e:'Butterfly'},{i:'ğŸ',j:'ã¯ã¡',e:'Bee'},{i:'ğŸ',j:'ã¦ã‚“ã¨ã†ã‚€ã—',e:'Ladybug'},{i:'ğŸœ',j:'ã‚ã‚Š',e:'Ant'},{i:'ğŸŒ',j:'ã‹ãŸã¤ã‚€ã‚Š',e:'Snail'},
        {i:'ğŸ•·ï¸',j:'ãã‚‚',e:'Spider'},{i:'ğŸ¢',j:'ã‹ã‚',e:'Turtle'},{i:'ğŸ',j:'ã¸ã³',e:'Snake'},{i:'ğŸ¦–',j:'æç«œ',e:'Dinosaur'},{i:'ğŸ‘¾',j:'ã‹ã„ã˜ã‚…ã†',e:'Monster'},
        {i:'â˜€ï¸',j:'ãŸã„ã‚ˆã†',e:'Sun'},{i:'ğŸŒ™',j:'ã¤ã',e:'Moon'},{i:'â­',j:'ã»ã—',e:'Star'},{i:'â˜ï¸',j:'ãã‚‚',e:'Cloud'},{i:'â˜”',j:'ã‚ã‚',e:'Rain'},
        {i:'âš½',j:'ã•ã£ã‹ãƒ¼ã¼ãƒ¼ã‚‹',e:'Soccer Ball'},{i:'ğŸ€',j:'ã°ã™ã‘ã¼ãƒ¼ã‚‹',e:'Basketball'},{i:'âš¾',j:'ã‚„ãã‚…ã†',e:'Baseball'},{i:'ğŸ¾',j:'ã¦ã«ã™',e:'Tennis'},{i:'ğŸ',j:'ã·ã‚Œãœã‚“ã¨',e:'Present'}
    ];

    let isProcessing = false;

    function startGame() {
        document.getElementById('startScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'flex';
        nextLevel();
    }

    function stopGame() {
        window.speechSynthesis.cancel();
        document.getElementById('startScreen').style.display = 'block';
        document.getElementById('gameScreen').style.display = 'none';
    }

    function nextLevel() {
        isProcessing = false;
        document.getElementById('statusLabel').innerHTML = "ã©ã‚ŒãŒ ã¡ãŒã†ã‹ãªï¼Ÿ<br><small>Which one is different?</small>";
        const grid = document.getElementById('quizGrid');
        grid.innerHTML = '';

        let randIndices = [];
        while(randIndices.length < 2) {
            let r = Math.floor(Math.random() * masterData.length);
            if(!randIndices.includes(r)) randIndices.push(r);
        }
        const base = masterData[randIndices[0]];
        const diff = masterData[randIndices[1]];

        const diffIndex = Math.floor(Math.random() * 9);
        
        for (let i = 0; i < 9; i++) {
            const item = (i === diffIndex) ? diff : base;
            const btn = document.createElement('div');
            btn.className = 'item-btn';
            btn.innerText = item.i;
            btn.onclick = () => checkAnswer(i === diffIndex, item, btn);
            grid.appendChild(btn);
        }
    }

    function checkAnswer(isCorrect, item, btn) {
        if (isProcessing) return;
        window.speechSynthesis.cancel();

        if (isCorrect) {
            isProcessing = true;
            btn.classList.add('correct');
            document.getElementById('statusLabel').innerHTML = "â­•ï¸ ã›ã„ã‹ã„ï¼<br><small>" + item.e + "!</small>";
            
            const uttrJa = new SpeechSynthesisUtterance("ã›ã„ã‹ã„ï¼ã“ã‚Œã¯ " + item.j);
            uttrJa.lang = 'ja-JP';
            const uttrEn = new SpeechSynthesisUtterance("That's right! It's a " + item.e);
            uttrEn.lang = 'en-US';
            
            uttrJa.onend = () => { window.speechSynthesis.speak(uttrEn); };
            window.speechSynthesis.speak(uttrJa);

            setTimeout(nextLevel, 3000);
        } else {
            btn.classList.add('wrong');
            document.getElementById('statusLabel').innerHTML = "âŒ ã‚ã‚Œã‚Œï¼Ÿ<br><small>Try another one!</small>";
            const uttrNo = new SpeechSynthesisUtterance("ã¡ãŒã†ã‚ˆ");
            uttrNo.lang = 'ja-JP';
            window.speechSynthesis.speak(uttrNo);

            setTimeout(() => {
                btn.classList.remove('wrong');
                document.getElementById('statusLabel').innerHTML = "ã©ã‚ŒãŒ ã¡ãŒã†ã‹ãªï¼Ÿ<br><small>Which one is different?</small>";
            }, 1000);
        }
    }
</script>
</body>
</html>
